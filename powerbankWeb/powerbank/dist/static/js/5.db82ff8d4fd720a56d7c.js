webpackJsonp([5,2],{"/ThD":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("VU/8")(null,null,!1,null,null,null);t.default=i.exports},"1X3v":function(e,t,a){e.exports=a.p+"static/img/banner.a43d10e.jpg"},"36Ah":function(e,t){},"3Q4o":function(e,t,a){"use strict";t.d=function(e){for(var t=[],a=e[0][0].length,i=0;i<e.length;i++){var o={};if(o.value=e[i][0],o.label=e[i][1],!1===e[i][2]&&(o.children=[]),0===i)t.push(o);else{var r=e[i][0].substring(a+1).split(".");if(1===r.length)t[0].children.push(o);else{for(var s=t[0].children,n=0;n<r.length-1;n++)s=s[r[n]-1].children;s.push(o)}}}return t},t.c=function(e){for(var t=[],a=0;a<e.length;a++){var o={};o.key=e[a][0],o.label="* - "+e[a][1]+" "+e[a][2]+" "+Object(i.a)(e[a][3],100)+"/"+Object(i.a)(e[a][4],100),t.push(o)}return t},t.b=function(e){for(var t=[],a=0;a<e.length;a++){var i={};i.label=e[a][0],i.goods_num=e[a][1],i.value=e[a][2],i.pp=e[a][3],i.rp=e[a][4],t.push(i)}return t},t.e=function(e,t){for(var a=[],i=0;i<e.length;i++){var o={};if(o.id=e[i][0],o.label=e[i][1],-1!==t.indexOf(e[i][0])?o.disabled=!1:o.disabled=!0,!1===e[i][2]&&(o.children=[]),"0"!==e[i][0]){var r=e[i][0].substring(2).split(".");if(1===r.length)a.push(o);else{for(var s=a,n=0;n<r.length-1;n++)s=s[r[n]-1].children;s.push(o)}}}return a},t.a=function(e){return function(t,a){var i=t[e],o=a[e];if(i.length!==o.length)return i.length<o.length?1:-1;i=i.split("."),o=o.split(".");for(var r=0;r<i.length;r++)if(i[r]-o[r]!=0)return o[r]-i[r]}},t.f=function(e,t,a,i,o){o.$message({message:e,type:t,dangerouslyUseHTMLString:a,showClose:i})};var i=a("I6Q1")},"3ytd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),r={name:"device",data:function(){return{filters:{name:""},crumbMsg:["数据分析","订单记录"],tableLoading:!1,currentPage:1,total:0,deviceList:[{name:"11",age:111},{name:"22",age:222}],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},editForm:{id:0}}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},handleDel:function(e){console.log(e)},handleEdit:function(e){this.editFormVisible=!0,this.editForm=o()({},e),console.log(this.editFormVisible)},editSubmit:function(){console.log(this.editForm)}},components:{Crumb:a("4n8I").default}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"设备编号"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:0===this.deviceList.length},on:{click:function(e){}}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.deviceList,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,40,1e4],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"设备编号",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备状态"}},[a("el-radio-group",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}},[a("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("在线")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("离线")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄"}},[a("el-input-number",{attrs:{min:0,max:200},model:{value:e.editForm.age,callback:function(t){e.$set(e.editForm,"age",t)},expression:"editForm.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.age,callback:function(t){e.$set(e.editForm,"age",t)},expression:"editForm.age"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.editSubmit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},n=a("VU/8")(r,s,!1,function(e){a("oUiw")},"data-v-01fd01dc",null);t.default=n.exports},"4n8I":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crumb"},[a("el-breadcrumb",{attrs:{separator:">"}},[a("el-breadcrumb-item",[e._v("主页")]),e._v(" "),e._l(e.crumbMsg,function(t){return a("el-breadcrumb-item",{key:t},[e._v(e._s(t))])})],2)],1)},staticRenderFns:[]},o=a("VU/8")({name:"device",props:["crumbMsg"]},i,!1,function(e){a("qGgc")},"data-v-9f0e1980",null);t.default=o.exports},"6nd8":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("VU/8")(null,null,!1,null,null,null);t.default=i.exports},"9OCR":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),r=a("4n8I"),s=a("Foau"),n=a("T452"),l=a("3Q4o"),d={name:"group",data:function(){return{crumbMsg:["管理员管理","机构管理"],filters:{optFilters:[],pageSize:10,currentPage:1,sortName:"",orderType:"",mixing:""},loadOn:{tableLoading:!0,addFormVisible:!1,editFormVisible:!1,editLoading:!1,addLoading:!1,searchLoad:!1,resetLoad:!1,refreshLoad:!1},total:0,msgList:[],delList:[],options:[],FormRules:{name:[{required:!0,message:"请输入机构名称",trigger:"blur"}],pipe:[{required:!0,message:"请选择上级机构",trigger:"change"}]},editForm:{},addForm:{name:"",pipe:[],remark:""}}},created:function(){this._getIndex(),this._getMsgList()},methods:{_getIndex:function(e,t){var a=this;e=n.c.inst.instIndex.tips,t=n.c.inst.instIndex.url,Object(s.a)(e,t).then(function(e){e.code===n.a&&(a.options=Object(l.d)(e.data.options))})},_getMsgList:function(e,t){var a=this;this.loadOn.tableLoading=!0,e=n.c.inst.instList.tips,t=n.c.inst.instList.url;var i=o()({},e,this.filters);Object(s.a)(i,t).then(function(e){e.code===n.a&&(a.msgList=e.data.msg.data,a.total=e.data.msg.total),a.loadOn.tableLoading=!1,a.loadOn.resetLoad=!1,a.loadOn.searchLoad=!1,a.loadOn.refreshLoad=!1})},searchBtn:function(){this.loadOn.searchLoad=!0,this._getMsgList()},selectReset:function(){this.loadOn.resetLoad=!0,this.filters.optFilters=[],this._getMsgList()},refreshPage:function(){var e=this;this.loadOn.refreshLoad=!0,setTimeout(function(){e.loadOn.refreshLoad=!1},2e3),this._getMsgList(),this._getIndex(),this.loadOn.addFormVisible=!1,this.loadOn.editFormVisible=!1,this.loadOn.editLoading=!1,this.loadOn.addLoading=!1,this.loadOn.searchLoad=!1,this.loadOn.resetLoad=!1,this.loadOn.refreshLoa=!1},sortChange:function(e){null!==e.prop&&null!==e.order?(this.filters.sortName=e.prop,this.filters.orderType=e.order):(this.filters.sortName="",this.filters.orderType=""),this._getMsgList()},handleSizeChange:function(e){this.filters.pageSize=e,this._getMsgList()},handleCurrentChange:function(e){this.filters.currentPage=e,this._getMsgList()},selectChange:function(e){this.delList=e,e.sort(Object(l.a)("pipe_id")),console.log(e)},handleDel:function(e){var t=this;this.$confirm("确认删除机构："+e.name+" ？","提示",{type:"warning"}).then(function(){var a=n.c.inst.instDel.tips,i=n.c.inst.instDel.url,r=o()({},a,{delList:[{pipe_id:e.pipe_id}]});Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a&&1===e.data.err_ok?(a="删除成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="删除失败: 无权限！"):2===e.code?(a="删除失败，只有根节点最后一级机构才能删除！",i="error"):3===e.code?(a="删除失败，请先移除与该机构关联的信息(用户、设备、角色)！",i="error"):(a="删除失败！",i="error"),Object(l.f)(a,i,!1,!0,t)})}).catch(function(){return!1})},handleDels:function(){var e=this;this.$confirm("只有根节点最后一级机构才能删除，是否继续？","提示",{type:"warning"}).then(function(){var t=n.c.inst.instDel.tips,a=n.c.inst.instDel.url,i=o()({},t,{delList:e.delList});Object(s.b)(i,a).then(function(t){var a="",i="";t.code===n.a?(a="删除成功！",i="success",e._getMsgList(),e._getIndex()):2===t.code||3===t.code?(i="",a='<span style="color:green">'+t.data.err_ok+'</span> 个删除成功，<span style="color: red">'+t.data.err+"</span> 个删除失败。",0!==t.data.err_ok&&(e._getMsgList(),e._getIndex())):404===t.code?(i="warning",a="删除失败: 无权限！"):(a="删除失败！",i="error"),Object(l.f)(a,i,!0,!0,e)})}).catch(function(){return!1})},handleAdd:function(){this.loadOn.addFormVisible=!0},addSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(l.f)('带<span style="color: red"> * </span>号的选项不能为空！',"warning",!0,!0,t),!1;t.loadOn.addLoading=!0;var a=n.c.inst.instAdd.tips,i=n.c.inst.instAdd.url,r=o()({},a,t.addForm);Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="添加成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="添加失败: 无权限！"):(i="error",a="发生错误，请刷新页面重试！"),Object(l.f)(a,i,!0,!0,t),t.loadOn.addLoading=!1}).catch(function(){t.loadOn.addLoading=!1,Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})})},handleEdit:function(e){this.loadOn.editFormVisible=!0;for(var t=this.options[0].value.length,a=[],i=0;i<(e.pipe_id.length-t)/4;i++)a.push(e.pipe_id.slice(0,t+4*i));this.editForm=o()({pipe:a},e)},editSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(l.f)('带<span style="color: red"> * </span>号的选项不能为空！',"warning",!0,!0,t),!1;t.loadOn.editLoading=!0;var a=n.c.inst.instEdit.tips,i=n.c.inst.instEdit.url,r=o()({},a,t.editForm);Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="编辑成功！",i="success",t._getMsgList(),t._getIndex()):4===e.code?(a="无效操作！",i=""):3===e.code?(a="不能选择当前机构作为父级机构！",i="warning"):2===e.code?(a="只有根节点最后一级机构才能更换父级机构！",i="warning"):404===e.code?(i="warning",a="编辑失败: 无权限！"):(a="发生错误，请刷新页面重试！",i="error"),Object(l.f)(a,i,!1,!0,t),t.loadOn.editLoading=!1}).catch(function(){t.loadOn.editLoading=!1,Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})})}},components:{Crumb:r.default}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":"",disabled:this.loadOn.tableLoading},model:{value:e.filters.optFilters,callback:function(t){e.$set(e.filters,"optFilters",t)},expression:"filters.optFilters"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入查找内容",clearable:""},model:{value:e.filters.mixing,callback:function(t){e.$set(e.filters,"mixing",t)},expression:"filters.mixing"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search",loading:e.loadOn.searchLoad,disabled:this.loadOn.tableLoading},on:{click:e.searchBtn}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh",loading:e.loadOn.resetLoad,disabled:this.loadOn.tableLoading},on:{click:e.selectReset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"row-bg toolbar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:0===this.delList.length||this.loadOn.tableLoading},on:{click:e.handleDels}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:this.loadOn.tableLoading},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-button-group")],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[a("el-button",{attrs:{type:"success",round:"",size:"mini",loading:e.refreshLoad},on:{click:e.refreshPage}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadOn.tableLoading,expression:"loadOn.tableLoading"}],attrs:{data:e.msgList,"highlight-current-row":""},on:{"sort-change":e.sortChange,"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",prop:"pipe_id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"机构名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parent",label:"上级机构"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"创建用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"机构描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"made_time",label:"创建时间",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"edit_time",label:"最近编辑",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.filters.currentPage,"page-sizes":[10,25,50,100,e.total],"page-size":e.filters.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加机构",visible:e.loadOn.addFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"addFormVisible",t)}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级机构",prop:"pipe"}},[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":""},model:{value:e.addForm.pipe,callback:function(t){e.$set(e.addForm,"pipe",t)},expression:"addForm.pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机构描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"机构描述"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.addLoading,size:"small"},on:{click:function(t){e.addSubmit("addForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"机构编辑",visible:e.loadOn.editFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"editFormVisible",t)}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级机构",prop:"pipe"}},[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":""},model:{value:e.editForm.pipe,callback:function(t){e.$set(e.editForm,"pipe",t)},expression:"editForm.pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机构描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"机构描述"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.editLoading,size:"small"},on:{click:function(t){e.editSubmit("editForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},u=a("VU/8")(d,c,!1,function(e){a("sJsq")},"data-v-f7c2638c",null);t.default=u.exports},ARzN:function(e,t){},ChFg:function(e,t,a){e.exports=a.p+"static/img/banner.a43d10e.jpg"},EBEP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),r=a("4n8I"),s=a("Foau"),n=a("T452"),l=a("3Q4o"),d={name:"group",data:function(){var e=this;return{crumbMsg:["管理员管理","用户管理"],filters:{optFilters:[],mixing:"",pageSize:10,currentPage:1,sortName:"",orderType:""},loadOn:{tableLoading:!0,addFormVisible:!1,editFormVisible:!1,editLoading:!1,addLoading:!1,searchLoad:!1,resetLoad:!1,refreshLoad:!1},total:0,msgList:[],delList:[],options:[],FormRules:{nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:25,message:"长度在 2 到 25 个字符",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:15,message:"长度在 4 到 15 个字符",trigger:"blur"}],pass:[{required:!0,validator:function(t,a,i){""===a?i(new Error("请输入密码")):a.length<6?i(new Error("密码长度至少为6位")):(""!==e.addForm.checkPass&&e.$refs.addForm.validateField("checkPass"),i())},trigger:"blur"}],checkPass:[{required:!0,validator:function(t,a,i){""===a?i(new Error("请再次输入密码")):a!==e.addForm.pass?i(new Error("两次输入密码不一致!")):i()},trigger:"blur"}],pipe:[{required:!0,message:"请选择用户所属机构",trigger:"change"}],phone:[{max:20,message:"最长为20个字符",trigger:"blur"}]},editForm:{},addForm:{nickname:"",username:"",pipe:[],pass:"",checkPass:"",phone:"",address:"",remark:"",checkList:[]},statusList:[]}},created:function(){this._getIndex(),this._getMsgList()},methods:{_getIndex:function(e,t){var a=this;e=n.c.user.userIndex.tips,t=n.c.user.userIndex.url,Object(s.a)(e,t).then(function(e){e.code===n.a&&(a.options=Object(l.d)(e.data.options))})},_getMsgList:function(e,t){var a=this;this.loadOn.tableLoading=!0,e=n.c.user.userList.tips,t=n.c.user.userList.url;var i=o()({},e,this.filters);Object(s.a)(i,t).then(function(e){e.code===n.a&&(a.msgList=e.data.msg.data,a.total=e.data.msg.total,a.statusList=e.data.statusList,console.log(a.statusList)),a.loadOn.tableLoading=!1,a.loadOn.resetLoad=!1,a.loadOn.searchLoad=!1,a.loadOn.refreshLoad=!1})},searchBtn:function(){this.loadOn.searchLoad=!0,this._getMsgList()},selectReset:function(){this.loadOn.resetLoad=!0,this.filters.optFilters=[],this.filters.mixing="",this._getMsgList()},refreshPage:function(){var e=this;this.loadOn.refreshLoad=!0,setTimeout(function(){e.loadOn.refreshLoad=!1},2e3),this._getMsgList(),this._getIndex(),this.loadOn.addFormVisible=!1,this.loadOn.editFormVisible=!1,this.loadOn.editLoading=!1,this.loadOn.addLoading=!1,this.loadOn.searchLoad=!1,this.loadOn.resetLoad=!1,this.loadOn.refreshLoa=!1},sortChange:function(e){null!==e.prop&&null!==e.order?(this.filters.sortName=e.prop,this.filters.orderType=e.order):(this.filters.sortName="",this.filters.orderType=""),this._getMsgList()},handleSizeChange:function(e){this.filters.pageSize=e,this._getMsgList()},handleCurrentChange:function(e){this.filters.currentPage=e,this._getMsgList()},selectChange:function(e){this.delList=e},handleDel:function(e){var t=this;this.$confirm("确认删除？","提示",{type:"warning"}).then(function(){var a=n.c.user.userDel.tips,i=n.c.user.userDel.url,r=o()({},a,{delList:[{id:e.id}]});Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a&&1===e.data.err_ok?(a="删除成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="删除失败: 无权限！"):2===e.code?(a="删除失败, 无法删除当前登录账号！",i="warning"):(a="删除失败！",i="error"),Object(l.f)(a,i,!1,!0,t)})}).catch(function(){return!1})},handleDels:function(){var e=this;this.$confirm("确认删除？","提示",{type:"warning"}).then(function(){var t=n.c.user.userDel.tips,a=n.c.user.userDel.url,i=o()({},t,{delList:e.delList});Object(s.b)(i,a).then(function(t){var a="",i="";t.code===n.a?(a="删除成功！",i="success",e._getMsgList(),e._getIndex()):404===t.code?(i="warning",a="删除失败: 无权限！"):2===t.code?(i="",a='<span style="color:green">'+t.data.err_ok+'</span> 个删除成功，<span style="color: red">'+t.data.err+"</span> 个删除失败。",0!==t.data.err_ok&&(e._getMsgList(),e._getIndex())):(a="删除失败！",i="error"),Object(l.f)(a,i,!0,!0,e)})}).catch(function(){return!1})},handleAdd:function(){this.loadOn.addFormVisible=!0},addSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(l.f)('请按照规则填写带<span style="color: red"> * </span>号的选项与选填选项！',"warning",!0,!0,t),!1;t.loadOn.addLoading=!0;var a=n.c.user.userAdd.tips,i=n.c.user.userAdd.url,r=o()({},a,t.addForm);Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="添加成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="添加失败: 无权限！"):(i="error",a="发生错误，请刷新页面重试！"),Object(l.f)(a,i,!0,!0,t),t.loadOn.addLoading=!1}).catch(function(){t.loadOn.addLoading=!1,Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})})},handleEdit:function(e){this.loadOn.editFormVisible=!0;for(var t=this.options[0].value.length,a=[],i=0;i<(e.pipe_id.length-t)/4+1;i++)a.push(e.pipe_id.slice(0,t+4*i));this.editForm=o()({pipe:a},e),console.log(this.editForm)},editSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(l.f)('请按照规则填写带<span style="color: red"> * </span>号的选项与选填选项！',"warning",!0,!0,t),!1;t.loadOn.editLoading=!0;var a=n.c.user.userEdit.tips,i=n.c.user.userEdit.url,r=o()({},a,t.editForm);Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="编辑成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="编辑失败: 无权限！"):(i="error",a="发生错误，请刷新页面重试！"),Object(l.f)(a,i,!0,!0,t),t.loadOn.editLoading=!1}).catch(function(){t.loadOn.editLoading=!1,Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})})}},components:{Crumb:r.default}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":"",disabled:this.loadOn.tableLoading},model:{value:e.filters.optFilters,callback:function(t){e.$set(e.filters,"optFilters",t)},expression:"filters.optFilters"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入查找内容",clearable:""},model:{value:e.filters.mixing,callback:function(t){e.$set(e.filters,"mixing",t)},expression:"filters.mixing"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search",loading:e.loadOn.searchLoad,disabled:this.loadOn.tableLoading},on:{click:e.searchBtn}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh",loading:e.loadOn.resetLoad,disabled:this.loadOn.tableLoading},on:{click:e.selectReset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"row-bg toolbar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:0===this.delList.length||this.loadOn.tableLoading},on:{click:e.handleDels}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:this.loadOn.tableLoading},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-button-group")],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[a("el-button",{attrs:{type:"success",round:"",size:"mini",loading:e.refreshLoad},on:{click:e.refreshPage}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadOn.tableLoading,expression:"loadOn.tableLoading"}],attrs:{data:e.msgList,"highlight-current-row":""},on:{"sort-change":e.sortChange,"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("昵称: "+e._s(t.row.nickname))]),e._v(" "),a("p",[e._v("电话: "+e._s(t.row.phone))]),e._v(" "),a("p",[e._v("地址: "+e._s(t.row.address))]),e._v(" "),a("p",[e._v("描述: "+e._s(t.row.remark))]),e._v(" "),a("p",[e._v("角色: "+e._s(t.row.statusName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.nickname))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inst_name",label:"所属机构"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"创建用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"last_login",label:"最近登录",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.filters.currentPage,"page-sizes":[10,25,50,100,e.total],"page-size":e.filters.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加账号",visible:e.loadOn.addFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"addFormVisible",t)}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{attrs:{maxlength:"50","auto-complete":"off"},model:{value:e.addForm.nickname,callback:function(t){e.$set(e.addForm,"nickname",t)},expression:"addForm.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("el-input",{attrs:{type:"password",maxlength:"15","auto-complete":"off"},model:{value:e.addForm.pass,callback:function(t){e.$set(e.addForm,"pass",t)},expression:"addForm.pass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",maxlength:"15","auto-complete":"off"},model:{value:e.addForm.checkPass,callback:function(t){e.$set(e.addForm,"checkPass",t)},expression:"addForm.checkPass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{attrs:{placeholder:"联系电话",maxlength:"20"},model:{value:e.addForm.phone,callback:function(t){e.$set(e.addForm,"phone",t)},expression:"addForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"联系地址"},model:{value:e.addForm.address,callback:function(t){e.$set(e.addForm,"address",t)},expression:"addForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属机构",prop:"pipe"}},[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":""},model:{value:e.addForm.pipe,callback:function(t){e.$set(e.addForm,"pipe",t)},expression:"addForm.pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色配置"}},[a("el-checkbox-group",{model:{value:e.addForm.checkList,callback:function(t){e.$set(e.addForm,"checkList",t)},expression:"addForm.checkList"}},e._l(e.statusList,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"用户描述"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.addLoading,size:"small"},on:{click:function(t){e.addSubmit("addForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"账号设置",visible:e.loadOn.editFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"editFormVisible",t)}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{attrs:{maxlength:"50","auto-complete":"off"},model:{value:e.editForm.nickname,callback:function(t){e.$set(e.editForm,"nickname",t)},expression:"editForm.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{attrs:{placeholder:"联系电话",maxlength:"20"},model:{value:e.editForm.phone,callback:function(t){e.$set(e.editForm,"phone",t)},expression:"editForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"联系地址"},model:{value:e.editForm.address,callback:function(t){e.$set(e.editForm,"address",t)},expression:"editForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属机构",prop:"pipe"}},[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":""},model:{value:e.editForm.pipe,callback:function(t){e.$set(e.editForm,"pipe",t)},expression:"editForm.pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色配置"}},[a("el-checkbox-group",{model:{value:e.editForm.checkList,callback:function(t){e.$set(e.editForm,"checkList",t)},expression:"editForm.checkList"}},e._l(e.editForm.statusList,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id,disabled:t.disabled}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"描述"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.editLoading,size:"small"},on:{click:function(t){e.editSubmit("editForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},u=a("VU/8")(d,c,!1,function(e){a("iPg/")},"data-v-6e0c6cc2",null);t.default=u.exports},Gp1E:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),r=a("4n8I"),s=a("Foau"),n=a("T452"),l=a("3Q4o"),d=a("I6Q1"),c={name:"group",data:function(){var e=function(e,t,a){!1===/^\d+(\.\d+)?$/.test(+t)?a(new Error("请输入数字")):2===(""+t).split(".").length&&(""+t).split(".")[1].length>2?a(new Error("只能输入两位小数")):a()};return{crumbMsg:["产品管理","货道管理"],filters:{optFilters:[],pageSize:10,currentPage:1,sortName:"",orderType:"",mixing:""},loadOn:{tableLoading:!0,addFormVisible:!1,editFormVisible:!1,editLoading:!1,addLoading:!1,searchLoad:!1,resetLoad:!1,refreshLoad:!1},total:0,msgList:[],delList:[],options:[],goodsOptions:[],FormRules:{goods_pipe_num:[{required:!0,message:"请输入货道编号",trigger:"blur"},{min:1,max:25,message:"长度在 1 到 25 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入货道名称",trigger:"blur"},{min:1,max:25,message:"长度在 1 到 25 个字符",trigger:"blur"}],purchase_price:[{required:!0,validator:e,trigger:"blur"},{min:1,max:25,trigger:"blur"}],retail_price:[{required:!0,validator:e,trigger:"blur"},{min:1,max:25,trigger:"blur"}],goods:[{required:!0,message:"请选择商品",trigger:"change"}]},visibleAddBool:!1,visibleEditBool:!1,editForm:{},addForm:{goods_pipe_num:"",name:"",purchase_price:"",retail_price:"",goods:"",remark:""}}},created:function(){this._getIndex(),this._getMsgList()},methods:{_getIndex:function(e,t){var a=this;e=n.c.goods_pipe.goods_pipeIndex.tips,t=n.c.goods_pipe.goods_pipeIndex.url,Object(s.a)(e,t).then(function(e){e.code===n.a&&(a.options=Object(l.d)(e.data.options),a.goodsOptions=Object(l.b)(e.data.goodsOptions))})},_getMsgList:function(e,t){var a=this;this.loadOn.tableLoading=!0,e=n.c.goods_pipe.goods_pipeList.tips,t=n.c.goods_pipe.goods_pipeList.url;var i=o()({},e,this.filters);Object(s.a)(i,t).then(function(e){e.code===n.a&&(a.msgList=e.data.msg.data,a.total=e.data.msg.total),a.loadOn.tableLoading=!1,a.loadOn.resetLoad=!1,a.loadOn.searchLoad=!1,a.loadOn.refreshLoad=!1})},visibleAdd:function(e){this.visibleAddBool=e},visibleEdit:function(e){this.visibleEditBool=e},optionsAddChange:function(e,t){this.addForm.goods&&this.visibleAddBool&&(this.addForm.purchase_price=Object(d.a)(e,100)+"",this.addForm.retail_price=Object(d.a)(t,100)+"")},optionsEditChange:function(e,t){this.editForm.goods&&this.visibleEditBool&&(this.editForm.purchase_price=Object(d.a)(e,100)+"",this.editForm.retail_price=Object(d.a)(t,100)+"")},searchBtn:function(){this.loadOn.searchLoad=!0,this._getMsgList()},selectReset:function(){this.loadOn.resetLoad=!0,this.filters.optFilters=[],this.filters.mixing="",this._getMsgList()},refreshPage:function(){var e=this;this.loadOn.refreshLoad=!0,setTimeout(function(){e.loadOn.refreshLoad=!1},2e3),this._getMsgList(),this._getIndex(),this.loadOn.addFormVisible=!1,this.loadOn.editFormVisible=!1,this.loadOn.editLoading=!1,this.loadOn.addLoading=!1,this.loadOn.searchLoad=!1,this.loadOn.resetLoad=!1,this.loadOn.refreshLoa=!1},sortChange:function(e){null!==e.prop&&null!==e.order?(this.filters.sortName=e.prop,this.filters.orderType=e.order):(this.filters.sortName="",this.filters.orderType=""),this._getMsgList()},handleSizeChange:function(e){this.filters.pageSize=e,this._getMsgList()},handleCurrentChange:function(e){this.filters.currentPage=e,this._getMsgList()},selectChange:function(e){this.delList=e},handleDel:function(e){var t=this;this.$confirm("确认删除货道："+e.name+" ？","提示",{type:"warning"}).then(function(){var a=n.c.goods_pipe.goods_pipeDel.tips,i=n.c.goods_pipe.goods_pipeDel.url,r=o()({},a,{delList:[{goods_pipe_num:e.goods_pipe_num,id:e.id}]});Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a&&1===e.data.err_ok?(a="删除成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="删除失败: 无权限！"):2===e.code?(a="删除失败: 货道使用中，请先解除货道与设备的绑定！",i="error"):(a="删除失败！",i="error"),Object(l.f)(a,i,!1,!0,t)})}).catch(function(){return!1})},handleDels:function(){var e=this;this.$confirm("正在使用中的货道无法删除，是否继续？","提示",{type:"warning"}).then(function(){var t=n.c.goods_pipe.goods_pipeDel.tips,a=n.c.goods_pipe.goods_pipeDel.url,i=o()({},t,{delList:e.delList});Object(s.b)(i,a).then(function(t){var a="",i="";t.code===n.a?(a="删除成功！",i="success",e._getMsgList(),e._getIndex()):2===t.code?(i="",a='<span style="color:green">'+t.data.err_ok+'</span> 个删除成功，<span style="color: red">'+t.data.err+"</span> 个删除失败。",0!==t.data.err_ok&&(e._getMsgList(),e._getIndex())):404===t.code?(i="warning",a="删除失败: 无权限！"):(a="删除失败！",i="error"),Object(l.f)(a,i,!0,!0,e)})}).catch(function(){return!1})},handleAdd:function(){this.loadOn.addFormVisible=!0},addSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(l.f)('带<span style="color: red"> * </span>号的选项不能为空！',"warning",!0,!0,t),!1;t.loadOn.addLoading=!0;var a=n.c.goods_pipe.goods_pipeAdd.tips,i=n.c.goods_pipe.goods_pipeAdd.url,r=o()({p_price:Object(d.b)(t.addForm.purchase_price,100),r_price:Object(d.b)(t.addForm.retail_price,100)},a,t.addForm);Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="添加成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="添加失败: 无权限！"):2===e.code?(i="warning",a="添加失败: 货道编号重复！"):(i="error",a="发生错误，请刷新页面重试！"),Object(l.f)(a,i,!0,!0,t),t.loadOn.addLoading=!1}).catch(function(){t.loadOn.addLoading=!1,Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})})},handleEdit:function(e){this.loadOn.editFormVisible=!0,this.editForm=o()({},e)},editSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(l.f)('带<span style="color: red"> * </span>号的选项不能为空！',"warning",!0,!0,t),!1;t.loadOn.editLoading=!0;var a=n.c.goods_pipe.goods_pipeEdit.tips,i=n.c.goods_pipe.goods_pipeEdit.url,r=o()({p_price:Object(d.b)(t.editForm.purchase_price,100),r_price:Object(d.b)(t.editForm.retail_price,100)},a,t.editForm);Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="编辑成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="编辑失败: 无权限！"):2===e.code?(i="warning",a="编辑失败：货道编号重复，机构已存在该货道编号！"):(i="发生错误，请刷新页面重试！",a="error"),Object(l.f)(a,i,!1,!0,t),t.loadOn.editLoading=!1}).catch(function(){t.loadOn.editLoading=!1,Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})})}},components:{Crumb:r.default}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":"",disabled:this.loadOn.tableLoading},model:{value:e.filters.optFilters,callback:function(t){e.$set(e.filters,"optFilters",t)},expression:"filters.optFilters"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入查找内容",clearable:""},model:{value:e.filters.mixing,callback:function(t){e.$set(e.filters,"mixing",t)},expression:"filters.mixing"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search",loading:e.loadOn.searchLoad,disabled:this.loadOn.tableLoading},on:{click:e.searchBtn}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh",loading:e.loadOn.resetLoad,disabled:this.loadOn.tableLoading},on:{click:e.selectReset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"row-bg toolbar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:0===this.delList.length||this.loadOn.tableLoading},on:{click:e.handleDels}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:this.loadOn.tableLoading},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-button-group",[a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-upload"}},[e._v("导入")]),e._v(" "),a("el-button",{staticStyle:{color:"#409EFF"},attrs:{type:"",size:"mini"}},[e._v("导出"),a("i",{staticClass:"el-icon-download el-icon--right"})])],1)],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[a("el-button",{attrs:{type:"success",round:"",size:"mini",loading:e.refreshLoad},on:{click:e.refreshPage}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadOn.tableLoading,expression:"loadOn.tableLoading"}],attrs:{data:e.msgList,"highlight-current-row":""},on:{"sort-change":e.sortChange,"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"货道信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("货道名称: "+e._s(t.row.name))]),e._v(" "),a("p",[e._v("描述: "+e._s(t.row.remark))]),e._v(" "),a("p",[e._v("创建用户: "+e._s(t.row.creator))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.name))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_pipe_num",label:"货道编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"purchase_price",label:"成本",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"retail_price",label:"售价",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"made_time",label:"添加时间",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"edit_time",label:"最近编辑",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.filters.currentPage,"page-sizes":[10,25,50,100,e.total],"page-size":e.filters.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加货道",visible:e.loadOn.addFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"addFormVisible",t)}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"货道编号",prop:"goods_pipe_num"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.goods_pipe_num,callback:function(t){e.$set(e.addForm,"goods_pipe_num",t)},expression:"addForm.goods_pipe_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"货道名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择商品",prop:"goods"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择商品"},model:{value:e.addForm.goods,callback:function(t){e.$set(e.addForm,"goods",t)},expression:"addForm.goods"}},e._l(e.goodsOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value,change:e.optionsAddChange(t.pp,t.rp),"visible-change":e.visibleAdd}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.goods_num))])])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"商品成本",prop:"purchase_price"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.purchase_price,callback:function(t){e.$set(e.addForm,"purchase_price",t)},expression:"addForm.purchase_price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品售价",prop:"retail_price"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.retail_price,callback:function(t){e.$set(e.addForm,"retail_price",t)},expression:"addForm.retail_price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"描述"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.addLoading,size:"small"},on:{click:function(t){e.addSubmit("addForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"货道编辑",visible:e.loadOn.editFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"editFormVisible",t)}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"货道编号",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.editForm.goods_pipe_num,callback:function(t){e.$set(e.editForm,"goods_pipe_num",t)},expression:"editForm.goods_pipe_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"货道名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择商品",prop:"goods"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择商品"},model:{value:e.editForm.goods,callback:function(t){e.$set(e.editForm,"goods",t)},expression:"editForm.goods"}},e._l(e.goodsOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value,change:e.optionsEditChange(t.pp,t.rp),"visible-change":e.visibleEdit}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.goods_num))])])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"商品成本",prop:"purchase_price"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.editForm.purchase_price,callback:function(t){e.$set(e.editForm,"purchase_price",t)},expression:"editForm.purchase_price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品售价",prop:"retail_price"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.editForm.retail_price,callback:function(t){e.$set(e.editForm,"retail_price",t)},expression:"editForm.retail_price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"描述"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.editLoading,size:"small"},on:{click:function(t){e.editSubmit("editForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},m=a("VU/8")(c,u,!1,function(e){a("eCkk")},"data-v-5f2e5d17",null);t.default=m.exports},I6Q1:function(e,t,a){"use strict";function i(e,t){var a=0,i=e.toString(),o=t.toString();try{a+=i.split(".")[1].length}catch(e){}try{a+=o.split(".")[1].length}catch(e){}return Number(i.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,a)}t.b=i,t.a=function(e,t){var a=void 0,o=void 0,r=0,s=0;try{r=e.toString().split(".")[1].length}catch(e){}try{s=t.toString().split(".")[1].length}catch(e){}return a=Number(e.toString().replace(".","")),o=Number(t.toString().replace(".","")),i(a/o,Math.pow(10,s-r))}},KH5t:function(e,t){},LqM4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("主页")])},staticRenderFns:[]},o=a("VU/8")({name:"home",data:function(){return{}},components:{}},i,!1,null,null,null);t.default=o.exports},MvXa:function(e,t,a){e.exports=a.p+"static/img/banner.a43d10e.jpg"},NT1z:function(e,t){},P7aR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),r=a("4n8I"),s=a("Foau"),n=a("T452"),l=a("3Q4o"),d={data:function(){var e=this;return{crumbMsg:["设置"],setForm:{pass:"",newPass:"",checkPass:""},setLoading:!1,FormRules:{pass:[{required:!0,validator:function(t,a,i){""===a?i(new Error("请输入旧的密码")):a.length<6?i(new Error("密码长度至少为6位")):(""!==e.setForm.checkPass&&e.$refs.setForm.validateField("checkPass"),i())},trigger:"blur"}],newPass:[{required:!0,validator:function(t,a,i){""===a?i(new Error("请输入新的密码")):a.length<6?i(new Error("密码长度至少为6位")):(""!==e.setForm.checkPass&&e.$refs.setForm.validateField("checkPass"),i())},trigger:"blur"}],checkPass:[{required:!0,validator:function(t,a,i){""===a?i(new Error("请再次输入密码")):a!==e.setForm.newPass?i(new Error("两次输入密码不一致!")):i()},trigger:"blur"}]}}},methods:{setSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=n.c.userNavs.tips,i=n.c.userNavs.url,r=o()({},a,t.setForm);Object(s.b)(r,i).then(function(e){e.code===n.a?Object(l.f)(e.data.err,"success",!1,!1,t):Object(l.f)(e.data.err,"error",!1,!1,t)})}else Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})}},components:{Crumb:r.default}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setting"},[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("div",{staticClass:"parentDiv"},[a("el-form",{ref:"setForm",attrs:{model:e.setForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"旧的密码",prop:"pass"}},[a("el-input",{attrs:{type:"password",maxlength:"15","auto-complete":"off"},model:{value:e.setForm.pass,callback:function(t){e.$set(e.setForm,"pass",t)},expression:"setForm.pass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新的密码",prop:"newPass"}},[a("el-input",{attrs:{type:"password",maxlength:"15","auto-complete":"off"},model:{value:e.setForm.newPass,callback:function(t){e.$set(e.setForm,"newPass",t)},expression:"setForm.newPass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",maxlength:"15","auto-complete":"off"},model:{value:e.setForm.checkPass,callback:function(t){e.$set(e.setForm,"checkPass",t)},expression:"setForm.checkPass"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.setLoading,size:"small"},on:{click:function(t){e.setSubmit("setForm")}}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]},u=a("VU/8")(d,c,!1,function(e){a("NT1z")},null,null);t.default=u.exports},PXOj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),r=a("4n8I"),s=a("Foau"),n=a("T452"),l=a("3Q4o"),d=a("I6Q1"),c={name:"group",data:function(){var e=function(e,t,a){!1===/^\d+(\.\d+)?$/.test(+t)?a(new Error("请输入数字")):2===(""+t).split(".").length&&(""+t).split(".")[1].length>2?a(new Error("只能输入两位小数")):a()};return{crumbMsg:["产品管理","商品管理"],filters:{optFilters:[],pageSize:10,currentPage:1,sortName:"",orderType:"",mixing:""},loadOn:{tableLoading:!0,addFormVisible:!1,editFormVisible:!1,editLoading:!1,addLoading:!1,searchLoad:!1,resetLoad:!1,refreshLoad:!1},total:0,msgList:[],delList:[],options:[],FormRules:{goods_num:[{required:!0,message:"请输入商品编号",trigger:"blur"},{min:1,max:25,message:"长度在 1 到 25 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:1,max:25,message:"长度在 1 到 25 个字符",trigger:"blur"}],purchase_price:[{required:!0,validator:e,trigger:"blur"},{min:1,max:25,trigger:"blur"}],retail_price:[{required:!0,validator:e,trigger:"blur"},{min:1,max:25,trigger:"blur"}],pipe:[{required:!0,message:"请选择上级机构",trigger:"change"}]},editForm:{},addForm:{goods_num:"",name:"",purchase_price:"",retail_price:"",pipe:[],remark:""}}},created:function(){this._getIndex(),this._getMsgList()},methods:{_getIndex:function(e,t){var a=this;e=n.c.goods.goodsIndex.tips,t=n.c.goods.goodsIndex.url,Object(s.a)(e,t).then(function(e){e.code===n.a&&(a.options=Object(l.d)(e.data.options))})},_getMsgList:function(e,t){var a=this;this.loadOn.tableLoading=!0,e=n.c.goods.goodsList.tips,t=n.c.goods.goodsList.url;var i=o()({},e,this.filters);Object(s.a)(i,t).then(function(e){e.code===n.a&&(a.msgList=e.data.msg.data,a.total=e.data.msg.total),a.loadOn.tableLoading=!1,a.loadOn.resetLoad=!1,a.loadOn.searchLoad=!1,a.loadOn.refreshLoad=!1})},searchBtn:function(){this.loadOn.searchLoad=!0,this._getMsgList()},selectReset:function(){this.loadOn.resetLoad=!0,this.filters.optFilters=[],this.filters.mixing="",this._getMsgList()},refreshPage:function(){var e=this;this.loadOn.refreshLoad=!0,setTimeout(function(){e.loadOn.refreshLoad=!1},2e3),this._getMsgList(),this._getIndex(),this.loadOn.addFormVisible=!1,this.loadOn.editFormVisible=!1,this.loadOn.editLoading=!1,this.loadOn.addLoading=!1,this.loadOn.searchLoad=!1,this.loadOn.resetLoad=!1,this.loadOn.refreshLoa=!1},sortChange:function(e){null!==e.prop&&null!==e.order?(this.filters.sortName=e.prop,this.filters.orderType=e.order):(this.filters.sortName="",this.filters.orderType=""),this._getMsgList()},handleSizeChange:function(e){this.filters.pageSize=e,this._getMsgList()},handleCurrentChange:function(e){this.filters.currentPage=e,this._getMsgList()},selectChange:function(e){this.delList=e},handleDel:function(e){var t=this;this.$confirm("确认删除商品："+e.name+" ？","提示",{type:"warning"}).then(function(){var a=n.c.goods.goodsDel.tips,i=n.c.goods.goodsDel.url,r=o()({},a,{delList:[{goods_num:e.goods_num,id:e.id}]});Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a&&1===e.data.err_ok?(a="删除成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="删除失败: 无权限！"):2===e.code?(a="删除失败: 商品使用中，请先删除商品对应的货道！",i="error"):(a="删除失败！",i="error"),Object(l.f)(a,i,!1,!0,t)})}).catch(function(){return!1})},handleDels:function(){var e=this;this.$confirm("货道正在使用的商品无法删除，是否继续？","提示",{type:"warning"}).then(function(){var t=n.c.inst.instDel.tips,a=n.c.inst.instDel.url,i=o()({},t,{delList:e.delList});Object(s.b)(i,a).then(function(t){var a="",i="";t.code===n.a?(a="删除成功！",i="success",e._getMsgList(),e._getIndex()):2===t.code?(i="",a='<span style="color:green">'+t.data.err_ok+'</span> 个删除成功，<span style="color: red">'+t.data.err+"</span> 个删除失败。",0!==t.data.err_ok&&(e._getMsgList(),e._getIndex())):404===t.code?(i="warning",a="删除失败: 无权限！"):(a="删除失败！",i="error"),Object(l.f)(a,i,!0,!0,e)})}).catch(function(){return!1})},handleAdd:function(){this.loadOn.addFormVisible=!0},addSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(l.f)('带<span style="color: red"> * </span>号的选项不能为空！',"warning",!0,!0,t),!1;t.loadOn.addLoading=!0;var a=n.c.goods.goodsAdd.tips,i=n.c.goods.goodsAdd.url,r=o()({p_price:Object(d.b)(t.addForm.purchase_price,100),r_price:Object(d.b)(t.addForm.retail_price,100)},a,t.addForm);Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="添加成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="添加失败: 无权限！"):2===e.code?(i="warning",a="添加失败: 商品编号重复！"):(i="error",a="发生错误，请刷新页面重试！"),Object(l.f)(a,i,!0,!0,t),t.loadOn.addLoading=!1}).catch(function(){t.loadOn.addLoading=!1,Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})})},handleEdit:function(e){this.loadOn.editFormVisible=!0;for(var t=this.options[0].value.length,a=[],i=0;i<(e.pipe_id.length-t)/4+1;i++)a.push(e.pipe_id.slice(0,t+4*i));this.editForm=o()({pipe:a},e)},editSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(l.f)('带<span style="color: red"> * </span>号的选项不能为空！',"warning",!0,!0,t),!1;t.loadOn.editLoading=!0;var a=n.c.goods.goodsEdit.tips,i=n.c.goods.goodsEdit.url,r=o()({p_price:Object(d.b)(t.editForm.purchase_price,100),r_price:Object(d.b)(t.editForm.retail_price,100)},a,t.editForm);Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="编辑成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="编辑失败: 无权限！"):2===e.code?(i="warning",a="编辑失败：商品编号重复，机构已存在该商品编号！"):(i="发生错误，请刷新页面重试！",a="error"),Object(l.f)(a,i,!1,!0,t),t.loadOn.editLoading=!1}).catch(function(){t.loadOn.editLoading=!1,Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})})}},components:{Crumb:r.default}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":"",disabled:this.loadOn.tableLoading},model:{value:e.filters.optFilters,callback:function(t){e.$set(e.filters,"optFilters",t)},expression:"filters.optFilters"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入查找内容",clearable:""},model:{value:e.filters.mixing,callback:function(t){e.$set(e.filters,"mixing",t)},expression:"filters.mixing"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search",loading:e.loadOn.searchLoad,disabled:this.loadOn.tableLoading},on:{click:e.searchBtn}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh",loading:e.loadOn.resetLoad,disabled:this.loadOn.tableLoading},on:{click:e.selectReset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"row-bg toolbar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:0===this.delList.length||this.loadOn.tableLoading},on:{click:e.handleDels}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:this.loadOn.tableLoading},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-button-group",[a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-upload"}},[e._v("导入")]),e._v(" "),a("el-button",{staticStyle:{color:"#409EFF"},attrs:{type:"",size:"mini"}},[e._v("导出"),a("i",{staticClass:"el-icon-download el-icon--right"})])],1)],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[a("el-button",{attrs:{type:"success",round:"",size:"mini",loading:e.refreshLoad},on:{click:e.refreshPage}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadOn.tableLoading,expression:"loadOn.tableLoading"}],attrs:{data:e.msgList,"highlight-current-row":""},on:{"sort-change":e.sortChange,"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",prop:"pipe_id"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("商品名称: "+e._s(t.row.name))]),e._v(" "),a("p",[e._v("描述: "+e._s(t.row.remark))]),e._v(" "),a("p",[e._v("创建用户: "+e._s(t.row.creator))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.name))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_num",label:"商品编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"purchase_price",label:"成本",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"retail_price",label:"售价",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parent",label:"所属机构"}}),e._v(" "),a("el-table-column",{attrs:{prop:"made_time",label:"添加时间",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"edit_time",label:"最近编辑",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.filters.currentPage,"page-sizes":[10,25,50,100,e.total],"page-size":e.filters.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加商品",visible:e.loadOn.addFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"addFormVisible",t)}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"商品编号",prop:"goods_num"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.goods_num,callback:function(t){e.$set(e.addForm,"goods_num",t)},expression:"addForm.goods_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品成本",prop:"purchase_price"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.purchase_price,callback:function(t){e.$set(e.addForm,"purchase_price",t)},expression:"addForm.purchase_price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品售价",prop:"retail_price"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.retail_price,callback:function(t){e.$set(e.addForm,"retail_price",t)},expression:"addForm.retail_price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属机构",prop:"pipe"}},[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":""},model:{value:e.addForm.pipe,callback:function(t){e.$set(e.addForm,"pipe",t)},expression:"addForm.pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"描述"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.addLoading,size:"small"},on:{click:function(t){e.addSubmit("addForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"商品编辑",visible:e.loadOn.editFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"editFormVisible",t)}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"商品编号",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.editForm.goods_num,callback:function(t){e.$set(e.editForm,"goods_num",t)},expression:"editForm.goods_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品成本",prop:"purchase_price"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.editForm.purchase_price,callback:function(t){e.$set(e.editForm,"purchase_price",t)},expression:"editForm.purchase_price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品售价",prop:"retail_price"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.editForm.retail_price,callback:function(t){e.$set(e.editForm,"retail_price",t)},expression:"editForm.retail_price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属机构",prop:"pipe"}},[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":""},model:{value:e.editForm.pipe,callback:function(t){e.$set(e.editForm,"pipe",t)},expression:"editForm.pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"描述"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.editLoading,size:"small"},on:{click:function(t){e.editSubmit("editForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},m=a("VU/8")(c,u,!1,function(e){a("uHIa")},"data-v-59b9976c",null);t.default=m.exports},SFw4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),r=a("4n8I"),s=a("Foau"),n=a("T452"),l=a("3Q4o"),d={name:"group",data:function(){return{data1:[],data3:[],crumbMsg:["管理员管理","角色管理"],filters:{optFilters:[],pageSize:10,currentPage:1,sortName:"",orderType:""},loadOn:{tableLoading:!0,addFormVisible:!1,editFormVisible:!1,editLoading:!1,addLoading:!1,searchLoad:!1,resetLoad:!1,refreshLoad:!1},total:0,msgList:[],delList:[],options:[],FormRules:{name:[{required:!0,message:"请输入机构名称",trigger:"blur"}],is_enabled:[{required:!0}],status_type:[{required:!0}]},editForm:{},addForm:{name:"",is_enabled:"启用",status_type:1,remark:""}}},created:function(){this._getIndex(),this._getMsgList()},methods:{_getIndex:function(e,t){var a=this;e=n.c.status.statusIndex.tips,t=n.c.status.statusIndex.url,Object(s.a)(e,t).then(function(e){e.code===n.a&&(a.options=Object(l.d)(e.data.options))})},_getMsgList:function(e,t){var a=this;this.loadOn.tableLoading=!0,e=n.c.status.statusList.tips,t=n.c.status.statusList.url;var i=o()({},e,this.filters);Object(s.a)(i,t).then(function(e){e.code===n.a&&(a.msgList=e.data.msg.data,a.total=e.data.msg.total,a.data1=Object(l.e)(e.data.plist,e.data.permitList)),a.loadOn.tableLoading=!1,a.loadOn.resetLoad=!1,a.loadOn.searchLoad=!1,a.loadOn.refreshLoad=!1})},searchBtn:function(){this.loadOn.searchLoad=!0,this._getMsgList()},selectReset:function(){this.loadOn.resetLoad=!0,this.filters.optFilters=[],this._getMsgList()},refreshPage:function(){var e=this;this.loadOn.refreshLoad=!0,setTimeout(function(){e.loadOn.refreshLoad=!1},2e3),this._getMsgList(),this._getIndex(),this.loadOn.addFormVisible=!1,this.loadOn.editFormVisible=!1,this.loadOn.editLoading=!1,this.loadOn.addLoading=!1,this.loadOn.searchLoad=!1,this.loadOn.resetLoad=!1,this.loadOn.refreshLoa=!1},sortChange:function(e){null!==e.prop&&null!==e.order?(this.filters.sortName=e.prop,this.filters.orderType=e.order):(this.filters.sortName="",this.filters.orderType=""),this._getMsgList()},handleSizeChange:function(e){this.filters.pageSize=e,this._getMsgList()},handleCurrentChange:function(e){this.filters.currentPage=e,this._getMsgList()},selectChange:function(e){this.delList=e},handleDel:function(e){var t=this;this.$confirm("角色关联的用户将无法正常使用，是否继续？","提示",{type:"warning"}).then(function(){var a=n.c.status.statusDel.tips,i=n.c.status.statusDel.url,r=o()({},a,{delList:[{id:e.id}]});Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="删除成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="删除失败: 无权限！"):(a="删除失败！",i="error"),Object(l.f)(a,i,!1,!0,t)})}).catch(function(){return!1})},handleDels:function(){var e=this;this.$confirm("角色关联的用户将无法正常使用，是否继续？","提示",{type:"warning"}).then(function(){var t=n.c.status.statusDel.tips,a=n.c.status.statusDel.url,i=o()({},t,{delList:e.delList});Object(s.b)(i,a).then(function(t){var a="",i="";t.code===n.a?(a="删除成功！",i="success",e._getMsgList(),e._getIndex()):404===t.code?(i="warning",a="删除失败: 无权限！"):(i="error",a="发生错误，请刷新页面重试！"),Object(l.f)(a,i,!1,!0,e)})}).catch(function(){return!1})},handleAdd:function(){this.data3=this.data1,this.loadOn.addFormVisible=!0},addSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(l.f)('请按照规则填写带<span style="color: red"> * </span>号的选项与选填选项！',"warning",!0,!0,t),!1;t.loadOn.addLoading=!0;var a=n.c.status.statusAdd.tips,i=n.c.status.statusAdd.url,r=o()({powers:t.$refs.addTree.getCheckedKeys()},a,t.addForm);Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="添加成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="添加失败: 无权限！"):(i="error",a="发生错误，请刷新页面重试！"),Object(l.f)(a,i,!0,!0,t),t.loadOn.addLoading=!1}).catch(function(){t.loadOn.addLoading=!1,Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})})},handleEdit:function(e){var t=this;this.data3=this.data1,this.loadOn.editFormVisible=!0,this.editForm=o()({},e),setTimeout(function(){t.$refs.editTree.setCheckedKeys(e.powerlist)},20)},editSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(l.f)('带<span style="color: red"> * </span>号的选项不能为空！',"warning",!0,!0,t),!1;t.loadOn.editLoading=!0;var a=n.c.status.statusEdit.tips,i=n.c.status.statusEdit.url,r=o()({powers:t.$refs.editTree.getCheckedKeys()},a,t.editForm);Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="编辑成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="编辑失败: 无权限！"):(i="error",a="发生错误，请刷新页面重试！"),Object(l.f)(a,i,!0,!0,t),t.loadOn.editLoading=!1}).catch(function(){t.loadOn.editLoading=!1,Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})})}},components:{Crumb:r.default}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":"",disabled:this.loadOn.tableLoading},model:{value:e.filters.optFilters,callback:function(t){e.$set(e.filters,"optFilters",t)},expression:"filters.optFilters"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search",loading:e.loadOn.searchLoad,disabled:this.loadOn.tableLoading},on:{click:e.searchBtn}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh",loading:e.loadOn.resetLoad,disabled:this.loadOn.tableLoading},on:{click:e.selectReset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"row-bg toolbar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:0===this.delList.length||this.loadOn.tableLoading},on:{click:e.handleDels}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:this.loadOn.tableLoading},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-button-group")],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[a("el-button",{attrs:{type:"success",round:"",size:"mini",loading:e.refreshLoad},on:{click:e.refreshPage}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadOn.tableLoading,expression:"loadOn.tableLoading"}],attrs:{data:e.msgList,"highlight-current-row":""},on:{"sort-change":e.sortChange,"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parent",label:"所属机构"}}),e._v(" "),a("el-table-column",{attrs:{prop:"is_enabled",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"创建用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"made_time",label:"创建时间",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"edit_time",label:"最近编辑",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.filters.currentPage,"page-sizes":[10,25,50,100,e.total],"page-size":e.filters.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加角色",visible:e.loadOn.addFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"addFormVisible",t)}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否启用",prop:"is_enabled"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#c0c4cc","active-value":"启用","inactive-value":"禁用"},model:{value:e.addForm.is_enabled,callback:function(t){e.$set(e.addForm,"is_enabled",t)},expression:"addForm.is_enabled"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色类型",prop:"status_type"}},[a("el-radio-group",{model:{value:e.addForm.status_type,callback:function(t){e.$set(e.addForm,"status_type",t)},expression:"addForm.status_type"}},[a("el-radio",{attrs:{label:1}},[e._v("下级机构可编辑")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("下级机构不可编辑")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"权限配置"}},[a("el-tree",{ref:"addTree",attrs:{data:e.data3,"show-checkbox":"","node-key":"id","default-checked-keys":["0.001","0.002","0.003"]}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"描述"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.addLoading,size:"small"},on:{click:function(t){e.addSubmit("addForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"角色编辑",visible:e.loadOn.editFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"editFormVisible",t)}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否启用",prop:"is_enabled"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#c0c4cc","active-value":"启用","inactive-value":"禁用"},model:{value:e.editForm.is_enabled,callback:function(t){e.$set(e.editForm,"is_enabled",t)},expression:"editForm.is_enabled"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色类型",prop:"status_type"}},[a("el-radio-group",{model:{value:e.editForm.status_type,callback:function(t){e.$set(e.editForm,"status_type",t)},expression:"editForm.status_type"}},[a("el-radio",{attrs:{label:1}},[e._v("下级机构可编辑")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("下级机构不可编辑")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"权限配置"}},[a("el-tree",{ref:"editTree",attrs:{data:e.data3,"show-checkbox":"","node-key":"id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"角色描述"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.editLoading,size:"small"},on:{click:function(t){e.editSubmit("editForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},u=a("VU/8")(d,c,!1,function(e){a("ARzN")},"data-v-36f6c532",null);t.default=u.exports},XOD9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("Foau");var i=a("tCh4"),o=a("qzqY"),r={name:"pay",data:function(){return{webtype:+this.$route.query.webtype}},created:function(){this.test()},methods:{test:function(){console.log(this.$route.query.webtype),console.log("1"===this.$route.query.webtype)}},components:{Paypb:i.default,Paydrink:o.default}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[2===this.webtype?t("paypb"):this._e(),this._v(" "),1===this.webtype?t("paydrink"):this._e()],1)},staticRenderFns:[]},n=a("VU/8")(r,s,!1,function(e){a("KH5t")},"data-v-32c33f18",null);t.default=n.exports},Y3tu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),r=a("4n8I"),s=a("Foau"),n=a("T452"),l=a("3Q4o"),d={name:"group",data:function(){return{crumbMsg:["产品管理","设备管理"],filters:{optFilters:[],pageSize:10,currentPage:1,sortName:"",orderType:"",mixing:""},loadOn:{tableLoading:!0,addFormVisible:!1,editFormVisible:!1,editLoading:!1,addLoading:!1,searchLoad:!1,resetLoad:!1,refreshLoad:!1},total:0,msgList:[],delList:[],options:[],goods_pipeList:[],FormRules:{device_num:[{required:!0,message:"请输入设备编号",trigger:"blur"}],name:[{required:!0,message:"请输入设备别称",trigger:"blur"}],pipe:[{required:!0,message:"请选择上级机构",trigger:"change"}]},editForm:{},addForm:{device_num:"",goods_pipe:[],name:"",pipe:[],remark:""}}},created:function(){this._getIndex(),this._getMsgList()},methods:{_getIndex:function(e,t){var a=this;e=n.c.device.deviceIndex.tips,t=n.c.device.deviceIndex.url,Object(s.a)(e,t).then(function(e){e.code===n.a&&(a.options=Object(l.d)(e.data.options),a.goods_pipeList=Object(l.c)(e.data.goods_pipeList))})},_getMsgList:function(e,t){var a=this;this.loadOn.tableLoading=!0,e=n.c.device.deviceList.tips,t=n.c.device.deviceList.url;var i=o()({},e,this.filters);Object(s.a)(i,t).then(function(e){e.code===n.a&&(a.msgList=e.data.msg.data,a.total=e.data.msg.total),a.loadOn.tableLoading=!1,a.loadOn.resetLoad=!1,a.loadOn.searchLoad=!1,a.loadOn.refreshLoad=!1})},searchBtn:function(){this.loadOn.searchLoad=!0,this._getMsgList()},selectReset:function(){this.loadOn.resetLoad=!0,this.filters.optFilters=[],this.filters.mixing="",this._getMsgList()},refreshPage:function(){var e=this;this.loadOn.refreshLoad=!0,setTimeout(function(){e.loadOn.refreshLoad=!1},2e3),this._getMsgList(),this._getIndex(),this.loadOn.addFormVisible=!1,this.loadOn.editFormVisible=!1,this.loadOn.editLoading=!1,this.loadOn.addLoading=!1,this.loadOn.searchLoad=!1,this.loadOn.resetLoad=!1,this.loadOn.refreshLoa=!1},sortChange:function(e){null!==e.prop&&null!==e.order?(this.filters.sortName=e.prop,this.filters.orderType=e.order):(this.filters.sortName="",this.filters.orderType=""),this._getMsgList()},handleGoodsPipeChange:function(){console.log("1");for(var e=0,t=0;t<this.goods_pipeList.length;t++)this.goods_pipeList[t].label="* - "+this.goods_pipeList[t].label.substr(this.goods_pipeList[t].label.indexOf(" - ")+3);for(var a=0;a<this.addForm.goods_pipe.length;a++)for(var i=0;i<this.goods_pipeList.length;i++)this.addForm.goods_pipe[a]===this.goods_pipeList[i].key&&(e++,this.goods_pipeList[i].label=e+" - "+this.goods_pipeList[i].label.substr(this.goods_pipeList[i].label.indexOf(" - ")+3))},handleGoodsPipeChangeEdit:function(){console.log("2");for(var e=0,t=0;t<this.goods_pipeList.length;t++)this.goods_pipeList[t].label="* - "+this.goods_pipeList[t].label.substr(this.goods_pipeList[t].label.indexOf(" - ")+3);for(var a=0;a<this.editForm.goods_pipe.length;a++)for(var i=0;i<this.goods_pipeList.length;i++)this.editForm.goods_pipe[a]===this.goods_pipeList[i].key&&(e++,this.goods_pipeList[i].label=e+" - "+this.goods_pipeList[i].label.substr(this.goods_pipeList[i].label.indexOf(" - ")+3))},handleSizeChange:function(e){this.filters.pageSize=e,this._getMsgList()},handleCurrentChange:function(e){this.filters.currentPage=e,this._getMsgList()},selectChange:function(e){this.delList=e},handleDel:function(e){var t=this;this.$confirm("确认删除设备："+e.device_num+" ？","提示",{type:"warning"}).then(function(){var a=n.c.device.deviceDel.tips,i=n.c.device.deviceDel.url,r=o()({},a,{delList:[{device_num:e.device_num,id:e.id}]});Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a&&1===e.data.err_ok?(a="删除成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="删除失败: 无权限！"):2===e.code?(a="删除失败: 设备不存在！",i="error"):(a="删除失败！",i="error"),Object(l.f)(a,i,!1,!0,t)})}).catch(function(){return!1})},handleDels:function(){var e=this;this.$confirm("只有根节点最后一级机构才能删除，是否继续？","提示",{type:"warning"}).then(function(){var t=n.c.inst.instDel.tips,a=n.c.inst.instDel.url,i=o()({},t,{delList:e.delList});Object(s.b)(i,a).then(function(t){var a="",i="";t.code===n.a?(a="删除成功！",i="success",e._getMsgList(),e._getIndex()):2===t.code?(i="",a='<span style="color:green">'+t.data.err_ok+'</span> 个删除成功，<span style="color: red">'+t.data.err+"</span> 个删除失败。",0!==t.data.err_ok&&(e._getMsgList(),e._getIndex())):404===t.code?(i="warning",a="删除失败: 无权限！"):(a="删除失败！",i="error"),Object(l.f)(a,i,!0,!0,e)})}).catch(function(){return!1})},handleAdd:function(){this.loadOn.addFormVisible=!0,this.handleGoodsPipeChange()},addSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(l.f)('带<span style="color: red"> * </span>号的选项不能为空！',"warning",!0,!0,t),!1;t.loadOn.addLoading=!0;var a=n.c.device.deviceAdd.tips,i=n.c.device.deviceAdd.url,r=o()({},a,t.addForm);Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="添加成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="添加失败: 无权限！"):2===e.code?(i="warning",a="添加失败: 设备已存在！"):3===e.code?(i="warning",a="添加失败: 设备编号不正确，请核对后重新添加！"):(i="error",a="发生错误，请刷新页面重试！"),Object(l.f)(a,i,!0,!0,t),t.loadOn.addLoading=!1}).catch(function(){t.loadOn.addLoading=!1,Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})})},handleEdit:function(e){this.loadOn.editFormVisible=!0;for(var t=this.options[0].value.length,a=[],i=0;i<(e.pipe_id.length-t)/4+1;i++)a.push(e.pipe_id.slice(0,t+4*i));this.editForm=o()({pipe:a},e),this.handleGoodsPipeChangeEdit()},editSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(l.f)('带<span style="color: red"> * </span>号的选项不能为空！',"warning",!0,!0,t),!1;t.loadOn.editLoading=!0;var a=n.c.device.deviceEdit.tips,i=n.c.device.deviceEdit.url,r=o()({},a,t.editForm);Object(s.b)(r,i).then(function(e){var a="",i="";e.code===n.a?(a="编辑成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="编辑失败: 无权限！"):(i="发生错误，请刷新页面重试！",a="error"),Object(l.f)(a,i,!1,!0,t),t.loadOn.editLoading=!1}).catch(function(){t.loadOn.editLoading=!1,Object(l.f)("发生错误，请刷新页面重试！","error",!1,!1,t)})})}},components:{Crumb:r.default}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":"",disabled:this.loadOn.tableLoading},model:{value:e.filters.optFilters,callback:function(t){e.$set(e.filters,"optFilters",t)},expression:"filters.optFilters"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入查找内容",clearable:""},model:{value:e.filters.mixing,callback:function(t){e.$set(e.filters,"mixing",t)},expression:"filters.mixing"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search",loading:e.loadOn.searchLoad,disabled:this.loadOn.tableLoading},on:{click:e.searchBtn}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh",loading:e.loadOn.resetLoad,disabled:this.loadOn.tableLoading},on:{click:e.selectReset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"row-bg toolbar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:0===this.delList.length||this.loadOn.tableLoading},on:{click:e.handleDels}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:this.loadOn.tableLoading},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-button-group",[a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-upload"}},[e._v("导入")]),e._v(" "),a("el-button",{staticStyle:{color:"#409EFF"},attrs:{type:"",size:"mini"}},[e._v("导出"),a("i",{staticClass:"el-icon-download el-icon--right"})])],1)],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[a("el-button",{attrs:{type:"success",round:"",size:"mini",loading:e.refreshLoad},on:{click:e.refreshPage}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadOn.tableLoading,expression:"loadOn.tableLoading"}],attrs:{data:e.msgList,"highlight-current-row":""},on:{"sort-change":e.sortChange,"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",prop:"pipe_id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"device_num",label:"设备编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"别名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parent",label:"所属机构"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"创建用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"made_time",label:"添加时间",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"edit_time",label:"最近编辑",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.filters.currentPage,"page-sizes":[10,25,50,100,e.total],"page-size":e.filters.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加设备",visible:e.loadOn.addFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"addFormVisible",t)}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"设备编号",prop:"device_num"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.device_num,callback:function(t){e.$set(e.addForm,"device_num",t)},expression:"addForm.device_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备别称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属机构",prop:"pipe"}},[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":""},model:{value:e.addForm.pipe,callback:function(t){e.$set(e.addForm,"pipe",t)},expression:"addForm.pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定货道",prop:"goods_pipe"}},[a("el-transfer",{attrs:{filterable:"",titles:["货道列表","绑定列表"],"button-texts":["解绑","绑定"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:e.goods_pipeList},on:{change:e.handleGoodsPipeChange},model:{value:e.addForm.goods_pipe,callback:function(t){e.$set(e.addForm,"goods_pipe",t)},expression:"addForm.goods_pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"设备描述"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.addLoading,size:"small"},on:{click:function(t){e.addSubmit("addForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"设备编辑",visible:e.loadOn.editFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"editFormVisible",t)}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"设备编号",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.editForm.device_num,callback:function(t){e.$set(e.editForm,"device_num",t)},expression:"editForm.device_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备别称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属机构",prop:"pipe"}},[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":""},model:{value:e.editForm.pipe,callback:function(t){e.$set(e.editForm,"pipe",t)},expression:"editForm.pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定货道",prop:"goods_pipe"}},[a("el-transfer",{attrs:{filterable:"",titles:["货道列表","绑定列表"],"button-texts":["解绑","绑定"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:e.goods_pipeList},on:{change:e.handleGoodsPipeChangeEdit},model:{value:e.editForm.goods_pipe,callback:function(t){e.$set(e.editForm,"goods_pipe",t)},expression:"editForm.goods_pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"设备描述"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.editLoading,size:"small"},on:{click:function(t){e.editSubmit("editForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},u=a("VU/8")(d,c,!1,function(e){a("36Ah")},"data-v-c8e440a6",null);t.default=u.exports},eCkk:function(e,t){},gU6J:function(e,t,a){function i(e){return a(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./achieve/achieve":"/ThD","./achieve/achieve.vue":"/ThD","./crumb/crumb":"4n8I","./crumb/crumb.vue":"4n8I","./customer/customer":"6nd8","./customer/customer.vue":"6nd8","./device/device":"Y3tu","./device/device.vue":"Y3tu","./focus/focus":"5+wk","./focus/focus.vue":"5+wk","./goods/goods":"PXOj","./goods/goods.vue":"PXOj","./goods_pipe/goods_pipe":"Gp1E","./goods_pipe/goods_pipe.vue":"Gp1E","./group/group":"9OCR","./group/group.vue":"9OCR","./home/home":"LqM4","./home/home.vue":"LqM4","./navs/navs":"Rq17","./navs/navs.vue":"Rq17","./order/order":"3ytd","./order/order.vue":"3ytd","./pay/banner.jpg":"1X3v","./pay/pay":"XOD9","./pay/pay.vue":"XOD9","./paydrink/banner.jpg":"MvXa","./paydrink/paydrink":"qzqY","./paydrink/paydrink.vue":"qzqY","./paypb/banner.jpg":"ChFg","./paypb/paypb":"tCh4","./paypb/paypb.vue":"tCh4","./setting/setting":"P7aR","./setting/setting.vue":"P7aR","./status/status":"SFw4","./status/status.vue":"SFw4","./tab/tab":"BrIN","./tab/tab.vue":"BrIN","./users/users":"EBEP","./users/users.vue":"EBEP"};i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="gU6J"},"gnn/":function(e,t){},"iPg/":function(e,t){},oUiw:function(e,t){},qGgc:function(e,t){},qzqY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Foau"),o={name:"pay",data:function(){return{device:this.$route.query.device,code:this.$route.query.code,payLoad:!1,paySub:!0,radiohead:1,msg:[],isChange:!1}},created:function(){this._getPayinfo()},methods:{_getPayinfo:function(){var e=this,t=this.device;Object(i.b)({device:t},"/payinfo").then(function(t){"ok"===t.err_msg&&(e.msg=t.msg,e.paySub=!1)})},refreshWeb:function(){window.location.href="/pay/re_paying/?device="+this.device},onBridgeReady:function(){var e=this,t={device:this.device,sequence:this.radiohead,code:this.code};Object(i.b)(t,"/paydetail").then(function(t){var a=t,o=e;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:a.appId,timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign},function(e){"get_brand_wcpay_request:ok"===e.err_msg?Object(i.b)({device:o.device,sequence:o.radiohead},"/sendMQ").then(function(e){e.data.device===o.device&&e.data.sequence===o.radiohead&&(o.$message({message:"支付成功",type:"success",showClose:!0}),setTimeout(function(){o.refreshWeb()},1e3))}):(o.$message({message:"错误：支付失败",type:"error",showClose:!0}),setTimeout(function(){o.refreshWeb()},1e3))})})},payBtn:function(){this.payLoad=!0,this.isChange=!0,"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.onBridgeReady(),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.onBridgeReady()),document.attachEvent("onWeixinJSBridgeReady",this.onBridgeReady())):this.onBridgeReady()}},components:{}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"page"}},[a("section",{attrs:{id:"banner"}},[a("div",{staticClass:"inner"},[a("h2",[e._v("Welcome")]),e._v(" "),a("p",[e._v('点击按钮支付成功后点击"确定"即可畅饮！'),a("br"),e._v("\n\t\t\t设备编号: "+e._s(e.device)),a("br")]),e._v(" "),a("div",{staticStyle:{"margin-bottom":"30px"}},e._l(e.msg,function(t){return a("el-radio",{staticStyle:{margin:"0 0 10px 0",display:"block","text-align":"left",background:"white"},attrs:{label:t.sequence,disabled:e.isChange,border:""},model:{value:e.radiohead,callback:function(t){e.radiohead=t},expression:"radiohead"}},[e._v(e._s(t.name)+"  "+e._s(t.goods_name)+" 售价: "+e._s(t.retail_price)+" 元 "+e._s(t.remark))])})),e._v(" "),a("ul",[a("el-button",{staticClass:"actions",attrs:{type:"danger",loading:e.payLoad,disabled:e.paySub},on:{click:e.payBtn}},[e._v("支 付")])],1)])])])},staticRenderFns:[]},s=a("VU/8")(o,r,!1,function(e){a("z6Gw")},"data-v-50f725ab",null);t.default=s.exports},sJsq:function(e,t){},tCh4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Foau"),o={name:"pay",data:function(){return{device:this.$route.query.device,code:this.$route.query.code,payLoad:!1,paySub:!0,radiohead:1,radioNeck:"",msg:[{remark:"充电一小时",sequence:1,retail_price:1}],isChange:!1}},created:function(){this._getPayinfo()},methods:{_getPayinfo:function(){var e=this,t=this.device;Object(i.b)({device:t},"/payinfo").then(function(t){"ok"===t.err_msg&&(e.msg=t.msg,e.paySub=!1)})},changeRadio:function(e){this.radiohead=e,console.log(this.radiohead)},refreshWeb:function(){window.location.href="/pay/re_paying/?device="+this.device},onBridgeReady:function(){var e=this,t={device:this.device,sequence:this.radiohead,code:this.code};Object(i.b)(t,"/paydetail").then(function(t){var a=t,o=e;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:a.appId,timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign},function(e){"get_brand_wcpay_request:ok"===e.err_msg?Object(i.b)({device:o.device,sequence:o.radiohead},"/sendMQ").then(function(e){e.data.device===o.device&&e.data.sequence===o.radiohead&&(o.$message({message:"支付成功",type:"success",showClose:!0}),alert(e.data.sequence))}):(o.$message({message:"错误：支付失败",type:"error",showClose:!0}),setTimeout(function(){o.refreshWeb()},1e3))})})},payBtn:function(){this.payLoad=!0,this.isChange=!0,"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.onBridgeReady(),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.onBridgeReady()),document.attachEvent("onWeixinJSBridgeReady",this.onBridgeReady())):this.onBridgeReady()}},components:{}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"page"}},[a("section",{attrs:{id:"banner"}},[a("div",{staticClass:"bannerTop"},[a("div",{staticClass:"device"},[a("div",{staticClass:"deviceLeft"},[a("div",{staticClass:"owl"})]),e._v(" "),a("div",{staticClass:"deviceRight"},[a("div",{staticClass:"deviceInfo"},[a("span",{staticClass:"deviceName"},[e._v("共享充电系统")]),e._v(" "),a("span",{staticClass:"deviceNum"},[e._v(e._s(e.device))])]),e._v(" "),a("div",{staticClass:"deviceRemark"},[e._v("访问访问")])])]),e._v(" "),a("div",{staticClass:"btnGroup"},e._l(e.msg,function(t){return a("div",{staticClass:"divBtn",class:{active:e.radiohead===t.sequence},attrs:{label:t.sequence},on:{click:function(a){e.changeRadio(t.sequence)}}},[a("span",{staticClass:"remark"},[e._v(e._s(t.remark))]),a("span",{staticClass:"price"},[e._v("￥ "+e._s(t.retail_price))])])})),e._v(" "),a("div",{staticClass:"rate"},[a("span",{staticClass:"rateL"},[e._v("会员折扣")]),a("span",{staticClass:"rateR"},[e._v("暂无可用折扣")])])]),e._v(" "),a("div",{staticClass:"bannerMid"},[a("div",{staticClass:"payImg"}),a("div",{staticClass:"payRadio"},[a("el-radio",{attrs:{label:""},model:{value:e.radioNeck,callback:function(t){e.radioNeck=t},expression:"radioNeck"}})],1)]),e._v(" "),a("div",{staticClass:"bannerbottom"},[a("el-button",{attrs:{type:"primary",round:""}},[e._v("立即充电")])],1)])])},staticRenderFns:[]},s=a("VU/8")(o,r,!1,function(e){a("gnn/")},"data-v-40f8474a",null);t.default=s.exports},uHIa:function(e,t){},z6Gw:function(e,t){}});
//# sourceMappingURL=5.db82ff8d4fd720a56d7c.js.map