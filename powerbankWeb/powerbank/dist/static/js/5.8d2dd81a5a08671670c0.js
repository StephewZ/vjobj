webpackJsonp([5,2],{"/ThD":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("VU/8")(null,null,!1,null,null,null);t.default=i.exports},"3Q4o":function(e,t,a){"use strict";t.b=function(e){for(var t=[],a=e[0][0].length,i=0;i<e.length;i++){var o={};if(o.value=e[i][0],o.label=e[i][1],!1===e[i][2]&&(o.children=[]),0===i)t.push(o);else{var s=e[i][0].substring(a+1).split(".");if(1===s.length)t[0].children.push(o);else{for(var r=t[0].children,l=0;l<s.length-1;l++)r=r[s[l]-1].children;r.push(o)}}}return t},t.c=function(e,t){for(var a=[],i=0;i<e.length;i++){var o={};if(o.id=e[i][0],o.label=e[i][1],-1!==t.indexOf(e[i][0])?o.disabled=!1:o.disabled=!0,!1===e[i][2]&&(o.children=[]),"0"!==e[i][0]){var s=e[i][0].substring(2).split(".");if(1===s.length)a.push(o);else{for(var r=a,l=0;l<s.length-1;l++)r=r[s[l]-1].children;r.push(o)}}}return a},t.a=function(e){return function(t,a){var i=t[e],o=a[e];if(i.length!==o.length)return i.length<o.length?1:-1;i=i.split("."),o=o.split(".");for(var s=0;s<i.length;s++)if(i[s]-o[s]!=0)return o[s]-i[s]}},t.d=function(e,t,a,i,o){o.$message({message:e,type:t,dangerouslyUseHTMLString:a,showClose:i})}},"3ytd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),s={name:"device",data:function(){return{filters:{name:""},crumbMsg:["数据分析","订单记录"],tableLoading:!1,currentPage:1,total:0,deviceList:[{name:"11",age:111},{name:"22",age:222}],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},editForm:{id:0}}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},handleDel:function(e){console.log(e)},handleEdit:function(e){this.editFormVisible=!0,this.editForm=o()({},e),console.log(this.editFormVisible)},editSubmit:function(){console.log(this.editForm)}},components:{Crumb:a("4n8I").default}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"设备编号"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:0===this.deviceList.length},on:{click:function(e){}}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.deviceList,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,40,1e4],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"设备编号",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备状态"}},[a("el-radio-group",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}},[a("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("在线")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("离线")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄"}},[a("el-input-number",{attrs:{min:0,max:200},model:{value:e.editForm.age,callback:function(t){e.$set(e.editForm,"age",t)},expression:"editForm.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.age,callback:function(t){e.$set(e.editForm,"age",t)},expression:"editForm.age"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.editSubmit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},l=a("VU/8")(s,r,!1,function(e){a("oUiw")},"data-v-01fd01dc",null);t.default=l.exports},"4n8I":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crumb"},[a("el-breadcrumb",{attrs:{separator:">"}},[a("el-breadcrumb-item",[e._v("主页")]),e._v(" "),e._l(e.crumbMsg,function(t){return a("el-breadcrumb-item",{key:t},[e._v(e._s(t))])})],2)],1)},staticRenderFns:[]},o=a("VU/8")({name:"device",props:["crumbMsg"]},i,!1,function(e){a("qGgc")},"data-v-9f0e1980",null);t.default=o.exports},"6nd8":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("VU/8")(null,null,!1,null,null,null);t.default=i.exports},"9OCR":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),s=a("4n8I"),r=a("Foau"),l=a("T452"),n=a("3Q4o"),d={name:"group",data:function(){return{crumbMsg:["管理员管理","机构管理"],filters:{optFilters:[],pageSize:10,currentPage:1,sortName:"",orderType:""},loadOn:{tableLoading:!0,addFormVisible:!1,editFormVisible:!1,editLoading:!1,addLoading:!1,searchLoad:!1,resetLoad:!1,refreshLoad:!1},total:0,msgList:[],delList:[],options:[],FormRules:{name:[{required:!0,message:"请输入机构名称",trigger:"blur"}],pipe:[{required:!0,message:"请选择上级机构",trigger:"change"}]},editForm:{},addForm:{name:"",pipe:[],remark:""}}},created:function(){this._getIndex(),this._getMsgList()},methods:{_getIndex:function(e,t){var a=this;e=l.c.inst.instIndex.tips,t=l.c.inst.instIndex.url,Object(r.a)(e,t).then(function(e){e.code===l.a&&(a.options=Object(n.b)(e.data.options))})},_getMsgList:function(e,t){var a=this;this.loadOn.tableLoading=!0,e=l.c.inst.instList.tips,t=l.c.inst.instList.url;var i=o()({},e,this.filters);Object(r.a)(i,t).then(function(e){e.code===l.a&&(a.msgList=e.data.msg.data,a.total=e.data.msg.total),a.loadOn.tableLoading=!1,a.loadOn.resetLoad=!1,a.loadOn.searchLoad=!1,a.loadOn.refreshLoad=!1})},searchBtn:function(){this.loadOn.searchLoad=!0,this._getMsgList()},selectReset:function(){this.loadOn.resetLoad=!0,this.filters.optFilters=[],this._getMsgList()},refreshPage:function(){var e=this;this.loadOn.refreshLoad=!0,setTimeout(function(){e.loadOn.refreshLoad=!1},2e3),this._getMsgList(),this._getIndex(),this.loadOn.addFormVisible=!1,this.loadOn.editFormVisible=!1,this.loadOn.editLoading=!1,this.loadOn.addLoading=!1,this.loadOn.searchLoad=!1,this.loadOn.resetLoad=!1,this.loadOn.refreshLoa=!1},sortChange:function(e){null!==e.prop&&null!==e.order?(this.filters.sortName=e.prop,this.filters.orderType=e.order):(this.filters.sortName="",this.filters.orderType=""),this._getMsgList()},handleSizeChange:function(e){this.filters.pageSize=e,this._getMsgList()},handleCurrentChange:function(e){this.filters.currentPage=e,this._getMsgList()},selectChange:function(e){this.delList=e,e.sort(Object(n.a)("pipe_id")),console.log(e)},handleDel:function(e){var t=this;this.$confirm("确认删除机构："+e.name+" ？","提示",{type:"warning"}).then(function(){var a=l.c.inst.instDel.tips,i=l.c.inst.instDel.url,s=o()({},a,{delList:[{pipe_id:e.pipe_id}]});Object(r.b)(s,i).then(function(e){var a="",i="";e.code===l.a&&1===e.data.err_ok?(a="删除成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="删除失败: 无权限！"):2===e.code?(a="删除失败，只有根节点最后一级机构才能删除！",i="error"):3===e.code?(a="删除失败，请移除该机构所关联的用户与设备！",i="error"):(a="删除失败！",i="error"),Object(n.d)(a,i,!1,!0,t)})}).catch(function(){return!1})},handleDels:function(){var e=this;this.$confirm("只有根节点最后一级机构才能删除，是否继续？","提示",{type:"warning"}).then(function(){var t=l.c.inst.instDel.tips,a=l.c.inst.instDel.url,i=o()({},t,{delList:e.delList});Object(r.b)(i,a).then(function(t){var a="",i="";t.code===l.a?(a="删除成功！",i="success",e._getMsgList(),e._getIndex()):2===t.code||3===t.code?(i="",a='<span style="color:green">'+t.data.err_ok+'</span> 个删除成功，<span style="color: red">'+t.data.err+"</span> 个删除失败。",0!==t.data.err_ok&&(e._getMsgList(),e._getIndex())):404===t.code?(i="warning",a="删除失败: 无权限！"):(a="删除失败！",i="error"),Object(n.d)(a,i,!0,!0,e)})}).catch(function(){return!1})},handleAdd:function(){this.loadOn.addFormVisible=!0},addSubmit:function(){var e=this;if(""===this.addForm||0===this.addForm.pipe.length)return Object(n.d)('带<span style="color: red"> * </span>号的选项不能为空！',"warning",!0,!0,this),!1;this.loadOn.addLoading=!0;var t=l.c.inst.instAdd.tips,a=l.c.inst.instAdd.url,i=o()({},t,this.addForm);Object(r.b)(i,a).then(function(t){var a="",i="";t.code===l.a?(a="添加成功！",i="success",e._getMsgList(),e._getIndex()):404===t.code?(i="warning",a="添加失败: 无权限！"):(i="error",a="发生错误，请刷新页面重试！"),Object(n.d)(a,i,!0,!0,e),e.loadOn.addLoading=!1}).catch(function(){e.loadOn.addLoading=!1,Object(n.d)("发生错误，请刷新页面重试！","error",!1,!1,e)})},handleEdit:function(e){this.loadOn.editFormVisible=!0;for(var t=this.options[0].value.length,a=[],i=0;i<(e.pipe_id.length-t)/4;i++)a.push(e.pipe_id.slice(0,t+4*i));this.editForm=o()({pipe:a},e)},editSubmit:function(){var e=this;if(0===this.editForm.name.length||0===this.editForm.pipe.length)return Object(n.d)('带<span style="color: red"> * </span>号的选项不能为空！',"warning",!0,!0,this),!1;this.loadOn.editLoading=!0;var t=l.c.inst.instEdit.tips,a=l.c.inst.instEdit.url,i=o()({},t,this.editForm);Object(r.b)(i,a).then(function(t){t.code===l.a?(Object(n.d)("编辑成功！","success",!1,!0,e),e._getMsgList(),e._getIndex()):4===t.code?Object(n.d)("无效操作！","",!1,!0,e):3===t.code?Object(n.d)("不能选择当前机构作为父级机构！","warning",!1,!0,e):2===t.code?Object(n.d)("只有根节点最后一级机构才能更换父级机构！","warning",!1,!0,e):Object(n.d)("发生错误，请刷新页面重试！","error",!1,!1,e),e.loadOn.editLoading=!1}).catch(function(){e.loadOn.editLoading=!1,Object(n.d)("发生错误，请刷新页面重试！","error",!1,!1,e)})}},components:{Crumb:s.default}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":"",disabled:this.loadOn.tableLoading},model:{value:e.filters.optFilters,callback:function(t){e.$set(e.filters,"optFilters",t)},expression:"filters.optFilters"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search",loading:e.loadOn.searchLoad,disabled:this.loadOn.tableLoading},on:{click:e.searchBtn}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh",loading:e.loadOn.resetLoad,disabled:this.loadOn.tableLoading},on:{click:e.selectReset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"row-bg toolbar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:0===this.msgList.length||this.loadOn.tableLoading},on:{click:e.handleDels}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:this.loadOn.tableLoading},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-button-group")],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[a("el-button",{attrs:{type:"success",round:"",size:"mini",loading:e.refreshLoad},on:{click:e.refreshPage}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadOn.tableLoading,expression:"loadOn.tableLoading"}],attrs:{data:e.msgList,"highlight-current-row":""},on:{"sort-change":e.sortChange,"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",prop:"pipe_id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"机构名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parent",label:"上级机构"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"创建用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"机构描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"made_time",label:"创建时间",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"edit_time",label:"最近编辑",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.filters.currentPage,"page-sizes":[10,25,50,100,e.total],"page-size":e.filters.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加机构",visible:e.loadOn.addFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"addFormVisible",t)}}},[a("el-form",{attrs:{model:e.addForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级机构",prop:"pipe"}},[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":""},model:{value:e.addForm.pipe,callback:function(t){e.$set(e.addForm,"pipe",t)},expression:"addForm.pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机构描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"机构描述"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.addLoading,size:"small"},on:{click:e.addSubmit}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"机构编辑",visible:e.loadOn.editFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"editFormVisible",t)}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级机构",prop:"pipe"}},[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":""},model:{value:e.editForm.pipe,callback:function(t){e.$set(e.editForm,"pipe",t)},expression:"editForm.pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机构描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"机构描述"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.editLoading,size:"small"},on:{click:e.editSubmit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},u=a("VU/8")(d,c,!1,function(e){a("fe92")},"data-v-380e5283",null);t.default=u.exports},ARzN:function(e,t){},EBEP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),s=a("4n8I"),r=a("Foau"),l=a("T452"),n=a("3Q4o"),d={name:"group",data:function(){var e=this;return{crumbMsg:["管理员管理","用户管理"],filters:{optFilters:[],mixing:"",pageSize:10,currentPage:1,sortName:"",orderType:""},loadOn:{tableLoading:!0,addFormVisible:!1,editFormVisible:!1,editLoading:!1,addLoading:!1,searchLoad:!1,resetLoad:!1,refreshLoad:!1},total:0,msgList:[],delList:[],options:[],FormRules:{nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:25,message:"长度在 2 到 25 个字符",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:15,message:"长度在 4 到 15 个字符",trigger:"blur"}],pass:[{required:!0,validator:function(t,a,i){""===a?i(new Error("请输入密码")):a.length<6?i(new Error("密码长度至少为6位")):(""!==e.addForm.checkPass&&e.$refs.addForm.validateField("checkPass"),i())},trigger:"blur"}],checkPass:[{required:!0,validator:function(t,a,i){""===a?i(new Error("请再次输入密码")):a!==e.addForm.pass?i(new Error("两次输入密码不一致!")):i()},trigger:"blur"}],pipe:[{required:!0,message:"请选择用户所属机构",trigger:"change"}],phone:[{max:20,message:"最长为20个字符",trigger:"blur"}]},editForm:{},addForm:{nickname:"",username:"",pipe:[],pass:"",checkPass:"",phone:"",address:"",remark:"",checkList:[]},statusList:[]}},created:function(){this._getIndex(),this._getMsgList()},methods:{_getIndex:function(e,t){var a=this;e=l.c.user.userIndex.tips,t=l.c.user.userIndex.url,Object(r.a)(e,t).then(function(e){e.code===l.a&&(a.options=Object(n.b)(e.data.options))})},_getMsgList:function(e,t){var a=this;this.loadOn.tableLoading=!0,e=l.c.user.userList.tips,t=l.c.user.userList.url;var i=o()({},e,this.filters);Object(r.a)(i,t).then(function(e){e.code===l.a&&(a.msgList=e.data.msg.data,a.total=e.data.msg.total,a.statusList=e.data.statusList,console.log(a.statusList)),a.loadOn.tableLoading=!1,a.loadOn.resetLoad=!1,a.loadOn.searchLoad=!1,a.loadOn.refreshLoad=!1})},searchBtn:function(){this.loadOn.searchLoad=!0,this._getMsgList()},selectReset:function(){this.loadOn.resetLoad=!0,this.filters.optFilters=[],this._getMsgList()},refreshPage:function(){var e=this;this.loadOn.refreshLoad=!0,setTimeout(function(){e.loadOn.refreshLoad=!1},2e3),this._getMsgList(),this._getIndex(),this.loadOn.addFormVisible=!1,this.loadOn.editFormVisible=!1,this.loadOn.editLoading=!1,this.loadOn.addLoading=!1,this.loadOn.searchLoad=!1,this.loadOn.resetLoad=!1,this.loadOn.refreshLoa=!1},sortChange:function(e){null!==e.prop&&null!==e.order?(this.filters.sortName=e.prop,this.filters.orderType=e.order):(this.filters.sortName="",this.filters.orderType=""),this._getMsgList()},handleSizeChange:function(e){this.filters.pageSize=e,this._getMsgList()},handleCurrentChange:function(e){this.filters.currentPage=e,this._getMsgList()},selectChange:function(e){this.delList=e},handleDel:function(e){var t=this;this.$confirm("确认删除？","提示",{type:"warning"}).then(function(){var a=l.c.user.userDel.tips,i=l.c.user.userDel.url,s=o()({},a,{delList:[{id:e.id}]});Object(r.b)(s,i).then(function(e){var a="",i="";e.code===l.a&&1===e.data.err_ok?(a="删除成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="删除失败: 无权限！"):2===e.code?(a="删除失败, 无法删除当前登录账号！",i="warning"):(a="删除失败！",i="error"),Object(n.d)(a,i,!1,!0,t)})}).catch(function(){return!1})},handleDels:function(){var e=this;this.$confirm("确认删除？","提示",{type:"warning"}).then(function(){var t=l.c.user.userDel.tips,a=l.c.user.userDel.url,i=o()({},t,{delList:e.delList});Object(r.b)(i,a).then(function(t){var a="",i="";t.code===l.a?(a="删除成功！",i="success",e._getMsgList(),e._getIndex()):404===t.code?(i="warning",a="删除失败: 无权限！"):2===t.code?(i="",a='<span style="color:green">'+t.data.err_ok+'</span> 个删除成功，<span style="color: red">'+t.data.err+"</span> 个删除失败。",0!==t.data.err_ok&&(e._getMsgList(),e._getIndex())):(a="删除失败！",i="error"),Object(n.d)(a,i,!0,!0,e)})}).catch(function(){return!1})},handleAdd:function(){this.loadOn.addFormVisible=!0},addSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(n.d)('请按照规则填写带<span style="color: red"> * </span>号的选项与选填选项！',"warning",!0,!0,t),!1;t.loadOn.addLoading=!0;var a=l.c.user.userAdd.tips,i=l.c.user.userAdd.url,s=o()({},a,t.addForm);Object(r.b)(s,i).then(function(e){var a="",i="";e.code===l.a?(a="添加成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="添加失败: 无权限！"):(i="error",a="发生错误，请刷新页面重试！"),Object(n.d)(a,i,!0,!0,t),t.loadOn.addLoading=!1}).catch(function(){t.loadOn.addLoading=!1,Object(n.d)("发生错误，请刷新页面重试！","error",!1,!1,t)})})},handleEdit:function(e){this.loadOn.editFormVisible=!0;for(var t=this.options[0].value.length,a=[],i=0;i<(e.pipe_id.length-t)/4+1;i++)a.push(e.pipe_id.slice(0,t+4*i));this.editForm=o()({pipe:a},e),console.log(this.editForm)},editSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(n.d)('请按照规则填写带<span style="color: red"> * </span>号的选项与选填选项！',"warning",!0,!0,t),!1;t.loadOn.editLoading=!0;var a=l.c.user.userEdit.tips,i=l.c.user.userEdit.url,s=o()({},a,t.editForm);Object(r.b)(s,i).then(function(e){var a="",i="";e.code===l.a?(a="编辑成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="编辑失败: 无权限！"):(i="error",a="发生错误，请刷新页面重试！"),Object(n.d)(a,i,!0,!0,t),t.loadOn.editLoading=!1}).catch(function(){t.loadOn.editLoading=!1,Object(n.d)("发生错误，请刷新页面重试！","error",!1,!1,t)})})}},components:{Crumb:s.default}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":"",disabled:this.loadOn.tableLoading},model:{value:e.filters.optFilters,callback:function(t){e.$set(e.filters,"optFilters",t)},expression:"filters.optFilters"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入查找内容",clearable:""},model:{value:e.filters.mixing,callback:function(t){e.$set(e.filters,"mixing",t)},expression:"filters.mixing"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search",loading:e.loadOn.searchLoad,disabled:this.loadOn.tableLoading},on:{click:e.searchBtn}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh",loading:e.loadOn.resetLoad,disabled:this.loadOn.tableLoading},on:{click:e.selectReset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"row-bg toolbar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:0===this.delList.length||this.loadOn.tableLoading},on:{click:e.handleDels}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:this.loadOn.tableLoading},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-button-group")],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[a("el-button",{attrs:{type:"success",round:"",size:"mini",loading:e.refreshLoad},on:{click:e.refreshPage}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadOn.tableLoading,expression:"loadOn.tableLoading"}],attrs:{data:e.msgList,"highlight-current-row":""},on:{"sort-change":e.sortChange,"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("昵称: "+e._s(t.row.nickname))]),e._v(" "),a("p",[e._v("电话: "+e._s(t.row.phone))]),e._v(" "),a("p",[e._v("地址: "+e._s(t.row.address))]),e._v(" "),a("p",[e._v("描述: "+e._s(t.row.remark))]),e._v(" "),a("p",[e._v("角色: "+e._s(t.row.statusName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.nickname))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inst_name",label:"所属机构"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"创建用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"last_login",label:"最近登录",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.filters.currentPage,"page-sizes":[10,25,50,100,e.total],"page-size":e.filters.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加账号",visible:e.loadOn.addFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"addFormVisible",t)}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{attrs:{maxlength:"50","auto-complete":"off"},model:{value:e.addForm.nickname,callback:function(t){e.$set(e.addForm,"nickname",t)},expression:"addForm.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("el-input",{attrs:{type:"password",maxlength:"15","auto-complete":"off"},model:{value:e.addForm.pass,callback:function(t){e.$set(e.addForm,"pass",t)},expression:"addForm.pass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",maxlength:"15","auto-complete":"off"},model:{value:e.addForm.checkPass,callback:function(t){e.$set(e.addForm,"checkPass",t)},expression:"addForm.checkPass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{attrs:{placeholder:"联系电话",maxlength:"20"},model:{value:e.addForm.phone,callback:function(t){e.$set(e.addForm,"phone",t)},expression:"addForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"联系地址"},model:{value:e.addForm.address,callback:function(t){e.$set(e.addForm,"address",t)},expression:"addForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属机构",prop:"pipe"}},[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":""},model:{value:e.addForm.pipe,callback:function(t){e.$set(e.addForm,"pipe",t)},expression:"addForm.pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色配置"}},[a("el-checkbox-group",{model:{value:e.addForm.checkList,callback:function(t){e.$set(e.addForm,"checkList",t)},expression:"addForm.checkList"}},e._l(e.statusList,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"用户描述"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.addLoading,size:"small"},on:{click:function(t){e.addSubmit("addForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"账号设置",visible:e.loadOn.editFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"editFormVisible",t)}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{attrs:{maxlength:"50","auto-complete":"off"},model:{value:e.editForm.nickname,callback:function(t){e.$set(e.editForm,"nickname",t)},expression:"editForm.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{attrs:{placeholder:"联系电话",maxlength:"20"},model:{value:e.editForm.phone,callback:function(t){e.$set(e.editForm,"phone",t)},expression:"editForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"联系地址"},model:{value:e.editForm.address,callback:function(t){e.$set(e.editForm,"address",t)},expression:"editForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属机构",prop:"pipe"}},[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":""},model:{value:e.editForm.pipe,callback:function(t){e.$set(e.editForm,"pipe",t)},expression:"editForm.pipe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色配置"}},[a("el-checkbox-group",{model:{value:e.editForm.checkList,callback:function(t){e.$set(e.editForm,"checkList",t)},expression:"editForm.checkList"}},e._l(e.editForm.statusList,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id,disabled:t.disabled}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"描述"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.editLoading,size:"small"},on:{click:function(t){e.editSubmit("editForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},u=a("VU/8")(d,c,!1,function(e){a("oeV9")},"data-v-028a2b3c",null);t.default=u.exports},LqM4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("主页")])},staticRenderFns:[]},o=a("VU/8")({name:"home",data:function(){return{}},components:{}},i,!1,null,null,null);t.default=o.exports},SFw4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),s=a("4n8I"),r=a("Foau"),l=a("T452"),n=a("3Q4o"),d={name:"group",data:function(){return{data1:[],data3:[],crumbMsg:["管理员管理","角色管理"],filters:{optFilters:[],pageSize:10,currentPage:1,sortName:"",orderType:""},loadOn:{tableLoading:!0,addFormVisible:!1,editFormVisible:!1,editLoading:!1,addLoading:!1,searchLoad:!1,resetLoad:!1,refreshLoad:!1},total:0,msgList:[],delList:[],options:[],FormRules:{name:[{required:!0,message:"请输入机构名称",trigger:"blur"}],is_enabled:[{required:!0}],status_type:[{required:!0}]},editForm:{},addForm:{name:"",is_enabled:"启用",status_type:1,remark:""}}},created:function(){this._getIndex(),this._getMsgList()},methods:{_getIndex:function(e,t){var a=this;e=l.c.status.statusIndex.tips,t=l.c.status.statusIndex.url,Object(r.a)(e,t).then(function(e){e.code===l.a&&(a.options=Object(n.b)(e.data.options))})},_getMsgList:function(e,t){var a=this;this.loadOn.tableLoading=!0,e=l.c.status.statusList.tips,t=l.c.status.statusList.url;var i=o()({},e,this.filters);Object(r.a)(i,t).then(function(e){e.code===l.a&&(a.msgList=e.data.msg.data,a.total=e.data.msg.total,a.data1=Object(n.c)(e.data.plist,e.data.permitList)),a.loadOn.tableLoading=!1,a.loadOn.resetLoad=!1,a.loadOn.searchLoad=!1,a.loadOn.refreshLoad=!1})},searchBtn:function(){this.loadOn.searchLoad=!0,this._getMsgList()},selectReset:function(){this.loadOn.resetLoad=!0,this.filters.optFilters=[],this._getMsgList()},refreshPage:function(){var e=this;this.loadOn.refreshLoad=!0,setTimeout(function(){e.loadOn.refreshLoad=!1},2e3),this._getMsgList(),this._getIndex(),this.loadOn.addFormVisible=!1,this.loadOn.editFormVisible=!1,this.loadOn.editLoading=!1,this.loadOn.addLoading=!1,this.loadOn.searchLoad=!1,this.loadOn.resetLoad=!1,this.loadOn.refreshLoa=!1},sortChange:function(e){null!==e.prop&&null!==e.order?(this.filters.sortName=e.prop,this.filters.orderType=e.order):(this.filters.sortName="",this.filters.orderType=""),this._getMsgList()},handleSizeChange:function(e){this.filters.pageSize=e,this._getMsgList()},handleCurrentChange:function(e){this.filters.currentPage=e,this._getMsgList()},selectChange:function(e){this.delList=e},handleDel:function(e){var t=this;this.$confirm("角色关联的用户将无法正常使用，是否继续？","提示",{type:"warning"}).then(function(){var a=l.c.status.statusDel.tips,i=l.c.status.statusDel.url,s=o()({},a,{delList:[{id:e.id}]});Object(r.b)(s,i).then(function(e){var a="",i="";e.code===l.a?(a="删除成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="删除失败: 无权限！"):(a="删除失败！",i="error"),Object(n.d)(a,i,!1,!0,t)})}).catch(function(){return!1})},handleDels:function(){var e=this;this.$confirm("角色关联的用户将无法正常使用，是否继续？","提示",{type:"warning"}).then(function(){var t=l.c.status.statusDel.tips,a=l.c.status.statusDel.url,i=o()({},t,{delList:e.delList});Object(r.b)(i,a).then(function(t){var a="",i="";t.code===l.a?(a="删除成功！",i="success",e._getMsgList(),e._getIndex()):404===t.code?(i="warning",a="删除失败: 无权限！"):(i="error",a="发生错误，请刷新页面重试！"),Object(n.d)(a,i,!1,!0,e)})}).catch(function(){return!1})},handleAdd:function(){this.data3=this.data1,this.loadOn.addFormVisible=!0},addSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(n.d)('请按照规则填写带<span style="color: red"> * </span>号的选项与选填选项！',"warning",!0,!0,t),!1;t.loadOn.addLoading=!0;var a=l.c.status.statusAdd.tips,i=l.c.status.statusAdd.url,s=o()({powers:t.$refs.addTree.getCheckedKeys()},a,t.addForm);Object(r.b)(s,i).then(function(e){var a="",i="";e.code===l.a?(a="添加成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="添加失败: 无权限！"):(i="error",a="发生错误，请刷新页面重试！"),Object(n.d)(a,i,!0,!0,t),t.loadOn.addLoading=!1}).catch(function(){t.loadOn.addLoading=!1,Object(n.d)("发生错误，请刷新页面重试！","error",!1,!1,t)})})},handleEdit:function(e){var t=this;this.data3=this.data1,this.loadOn.editFormVisible=!0,this.editForm=o()({},e),setTimeout(function(){t.$refs.editTree.setCheckedKeys(e.powerlist)},20)},editSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return Object(n.d)('带<span style="color: red"> * </span>号的选项不能为空！',"warning",!0,!0,t),!1;t.loadOn.editLoading=!0;var a=l.c.status.statusEdit.tips,i=l.c.status.statusEdit.url,s=o()({powers:t.$refs.editTree.getCheckedKeys()},a,t.editForm);Object(r.b)(s,i).then(function(e){var a="",i="";e.code===l.a?(a="编辑成功！",i="success",t._getMsgList(),t._getIndex()):404===e.code?(i="warning",a="编辑失败: 无权限！"):(i="error",a="发生错误，请刷新页面重试！"),Object(n.d)(a,i,!0,!0,t),t.loadOn.editLoading=!1}).catch(function(){t.loadOn.editLoading=!1,Object(n.d)("发生错误，请刷新页面重试！","error",!1,!1,t)})})}},components:{Crumb:s.default}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:"请选择机构",options:e.options,filterable:"","change-on-select":"",disabled:this.loadOn.tableLoading},model:{value:e.filters.optFilters,callback:function(t){e.$set(e.filters,"optFilters",t)},expression:"filters.optFilters"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search",loading:e.loadOn.searchLoad,disabled:this.loadOn.tableLoading},on:{click:e.searchBtn}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh",loading:e.loadOn.resetLoad,disabled:this.loadOn.tableLoading},on:{click:e.selectReset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"row-bg toolbar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:0===this.delList.length||this.loadOn.tableLoading},on:{click:e.handleDels}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:this.loadOn.tableLoading},on:{click:e.handleAdd}},[e._v("添加")])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-button-group")],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[a("el-button",{attrs:{type:"success",round:"",size:"mini",loading:e.refreshLoad},on:{click:e.refreshPage}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadOn.tableLoading,expression:"loadOn.tableLoading"}],attrs:{data:e.msgList,"highlight-current-row":""},on:{"sort-change":e.sortChange,"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parent",label:"所属机构"}}),e._v(" "),a("el-table-column",{attrs:{prop:"is_enabled",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"创建用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"made_time",label:"创建时间",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"edit_time",label:"最近编辑",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.filters.currentPage,"page-sizes":[10,25,50,100,e.total],"page-size":e.filters.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加角色",visible:e.loadOn.addFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"addFormVisible",t)}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:"25",minlength:"1"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否启用",prop:"is_enabled"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#c0c4cc","active-value":"启用","inactive-value":"禁用"},model:{value:e.addForm.is_enabled,callback:function(t){e.$set(e.addForm,"is_enabled",t)},expression:"addForm.is_enabled"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色类型",prop:"status_type"}},[a("el-radio-group",{model:{value:e.addForm.status_type,callback:function(t){e.$set(e.addForm,"status_type",t)},expression:"addForm.status_type"}},[a("el-radio",{attrs:{label:1}},[e._v("下级机构可编辑")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("下级机构不可编辑")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"权限配置"}},[a("el-tree",{ref:"addTree",attrs:{data:e.data3,"show-checkbox":"","node-key":"id","default-checked-keys":["0.001","0.002","0.003"]}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"描述"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.addLoading,size:"small"},on:{click:function(t){e.addSubmit("addForm")}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"角色编辑",visible:e.loadOn.editFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.$set(e.loadOn,"editFormVisible",t)}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.FormRules}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否启用",prop:"is_enabled"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#c0c4cc","active-value":"启用","inactive-value":"禁用"},model:{value:e.editForm.is_enabled,callback:function(t){e.$set(e.editForm,"is_enabled",t)},expression:"editForm.is_enabled"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色类型",prop:"status_type"}},[a("el-radio-group",{model:{value:e.editForm.status_type,callback:function(t){e.$set(e.editForm,"status_type",t)},expression:"editForm.status_type"}},[a("el-radio",{attrs:{label:1}},[e._v("下级机构可编辑")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("下级机构不可编辑")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"权限配置"}},[a("el-tree",{ref:"editTree",attrs:{data:e.data3,"show-checkbox":"","node-key":"id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,maxlength:"100",placeholder:"角色描述"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.loadOn.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loadOn.editLoading,size:"small"},on:{click:function(t){e.editSubmit("editForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},u=a("VU/8")(d,c,!1,function(e){a("ARzN")},"data-v-36f6c532",null);t.default=u.exports},XOD9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("pG1i"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-button",{attrs:{type:"success"},on:{click:this.pay}},[this._v("点击支付 "+this._s(this.$route.params.num))])],1)},staticRenderFns:[]},s=a("VU/8")(i.a,o,!1,null,null,null);t.default=s.exports},Y3tu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),s={name:"device",data:function(){return{crumbMsg:["产品管理","设备管理"],filters:[],options:[{value:"zhinan",label:"指南",children:[{value:"shejiyuanze",label:"设计原则",children:[{value:"yizhi",label:"一致1111111111111"},{value:"fankui",label:"反馈"},{value:"xiaolv",label:"效率"},{value:"kekong",label:"可控"}]},{value:"daohang",label:"导航",children:[{value:"cexiangdaohang",label:"侧向导航"},{value:"dingbudaohang",label:"顶部导航"}]}]},{value:"ziyuan",label:"资源",children:[{value:"axure",label:"Axure Components"},{value:"sketch",label:"Sketch Templates"},{value:"jiaohu",label:"组件交互文档"}]}],tableLoading:!1,currentPage:1,total:0,deviceList:[{name:"11",age:111},{name:"22",age:222}],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},editForm:{id:0}}},methods:{selectReset:function(){this.filters=[]},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},handleDel:function(e){console.log(e)},handleEdit:function(e){this.editFormVisible=!0,this.editForm=o()({},e),console.log(this.filters)},editSubmit:function(){console.log(this.editForm)}},components:{Crumb:a("4n8I").default}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("crumb",{attrs:{crumbMsg:e.crumbMsg}}),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-cascader",{attrs:{placeholder:"机构 / 用户 / 设备编号",options:e.options,filterable:"","change-on-select":""},model:{value:e.filters,callback:function(t){e.filters=t},expression:"filters"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(e){}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},on:{click:e.selectReset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"row-bg toolbar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:0===this.deviceList.length},on:{click:function(e){}}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){}}},[e._v("添加")])],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-button-group",[a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-upload"}},[e._v("导入")]),e._v(" "),a("el-button",{staticStyle:{color:"#409EFF"},attrs:{type:"",size:"mini"}},[e._v("导出"),a("i",{staticClass:"el-icon-download el-icon--right"})])],1)],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:10}},[a("el-button",{attrs:{type:"success",round:"",size:"mini"}},[a("i",{staticClass:"el-icon-refresh el-icon--left"}),e._v("刷新")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.deviceList,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,40,1e4],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!0},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"设备编号",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备状态"}},[a("el-radio-group",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}},[a("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("在线")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("离线")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄"}},[a("el-input-number",{attrs:{min:0,max:200},model:{value:e.editForm.age,callback:function(t){e.$set(e.editForm,"age",t)},expression:"editForm.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.age,callback:function(t){e.$set(e.editForm,"age",t)},expression:"editForm.age"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.editSubmit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},l=a("VU/8")(s,r,!1,function(e){a("xmOR")},"data-v-02ac62ba",null);t.default=l.exports},fe92:function(e,t){},gU6J:function(e,t,a){function i(e){return a(o(e))}function o(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var s={"./achieve/achieve":"/ThD","./achieve/achieve.vue":"/ThD","./crumb/crumb":"4n8I","./crumb/crumb.vue":"4n8I","./customer/customer":"6nd8","./customer/customer.vue":"6nd8","./device/device":"Y3tu","./device/device.vue":"Y3tu","./focus/focus":"5+wk","./focus/focus.vue":"5+wk","./group/group":"9OCR","./group/group.vue":"9OCR","./home/home":"LqM4","./home/home.vue":"LqM4","./navs/navs":"Rq17","./navs/navs.vue":"Rq17","./order/order":"3ytd","./order/order.vue":"3ytd","./pay/pay":"XOD9","./pay/pay.vue":"XOD9","./status/status":"SFw4","./status/status.vue":"SFw4","./tab/tab":"BrIN","./tab/tab.vue":"BrIN","./users/users":"EBEP","./users/users.vue":"EBEP"};i.keys=function(){return Object.keys(s)},i.resolve=o,e.exports=i,i.id="gU6J"},oUiw:function(e,t){},oeV9:function(e,t){},pG1i:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_api_data__=__webpack_require__("Foau");__webpack_exports__.a={name:"home",data:function(){return{}},method:{onBridgeReady:function onBridgeReady(){var url="/paydetail",data={device:this.$route.params.num};Object(__WEBPACK_IMPORTED_MODULE_0_api_data__.b)(data,url).then(function(res){var jsonobj=eval("("+data+")");WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:jsonobj.appId,timeStamp:jsonobj.timestamp,nonceStr:jsonobj.nonceStr,package:jsonobj.package,signType:"MD5",paySign:jsonobj.paySign},function(e){"get_brand_wcpay_request:ok"===e.err_msg?this.$message({message:"支付成功",type:"success",showClose:!0}):this.$message({message:"错误："+e.err_msg,type:"error",showClose:!0})})})},pay:function(){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.onBridgeReady(),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.onBridgeReady()),document.attachEvent("onWeixinJSBridgeReady",this.onBridgeReady())):this.onBridgeReady()}},components:{}}},qGgc:function(e,t){},xmOR:function(e,t){}});
//# sourceMappingURL=5.8d2dd81a5a08671670c0.js.map